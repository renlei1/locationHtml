{"remainingRequest":"D:\\IdeaProjects\\SchoolProject\\dp_font\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\IdeaProjects\\SchoolProject\\dp_font\\src\\components\\LocationShow.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\IdeaProjects\\SchoolProject\\dp_font\\src\\components\\LocationShow.vue","mtime":1654868032860},{"path":"D:\\IdeaProjects\\SchoolProject\\dp_font\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\IdeaProjects\\SchoolProject\\dp_font\\node_modules\\babel-loader\\lib\\index.js","mtime":315532800000},{"path":"D:\\IdeaProjects\\SchoolProject\\dp_font\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\IdeaProjects\\SchoolProject\\dp_font\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KDQppbXBvcnQgcmVxdWVzdCBmcm9tICJAL3V0aWxzL3JlcXVlc3QiOw0KZXhwb3J0IGRlZmF1bHQgew0KICBwcm9wczogWyJib0hlaWdodCIsICJib3hXaXRoIl0sDQogIGRhdGEoKSB7DQogICAgcmV0dXJuIHsNCiAgICAgIC8vIG1hcmtlclVybDogcmVxdWlyZSgiLi4vYXNzZXRzL21hcmtlci5wbmciKSwgIC8vIOeCueagh+iusOWbvueJh+i3r+W+hA0KICAgICAgbWFwOiAiIiwNCiAgICAgIHpvb206IDE3LjIsIC8vIOWcsOWbvuS4gOW8gOWni+eahOe8qeaUvue6p+WIqw0KICAgICAgY2VudGVyOiBuZXcgd2luZG93LlRNYXAuTGF0TG5nKDMxLjY4MzYxNywgMTE4LjU1ODkyNyksIC8vIOWcsOWbvuS4gOW8gOWni+eahOS4reW/g+eCuQ0KICAgICAgcG9pbnRzOiBbXSwNCiAgICAgIHBvaW50OiB7DQogICAgICAgIGlkOiAiIiwNCiAgICAgICAgbGF0aXR1ZTogIiIsDQogICAgICAgIGxvbmdpdHVlOiAiIiwNCiAgICAgIH0sDQogICAgICBnZW9tZXRyeTogew0KICAgICAgICBpZDogIiIsIC8v54K55qCH6K6w5ZSv5LiA5qCH6K+G77yM5ZCO57ut5aaC5p6c5pyJ5Yig6Zmk44CB5L+u5pS55L2N572u562J5pON5L2c77yM6YO96ZyA6KaB5q2kaWQNCiAgICAgICAgc3R5bGVJZDogIm15c3R5bGUiLCAvL+aMh+Wumuagt+W8j2lkDQogICAgICAgIHBvc2l0aW9uOiBPYmplY3QsIC8v54K55qCH6K6w5Z2Q5qCH5L2N572uDQogICAgICB9LA0KICAgICAgZ2VvbWV0cmllczogW10sDQogICAgICBtYXJrZXJMYXllcnM6IFtdLA0KICAgICAgbWFya2VyTGF5ZXI6IHt9LA0KICAgICAgbG9jYXRpb25EYXRhOiBbXSwNCiAgICAgIGxvY2F0aW9uTGlzdDogW10sDQogICAgfTsNCiAgfSwNCiAgLy8gY3JlYXRlZCgpIHsNCiAgLy8gICB0aGlzLmdldExvY2F0aW9uKCk7DQogIC8vICAgY29uc29sZS5sb2codGhpcy5wb2ludHMpDQogIC8vICAgdGhpcy5pbml0TWFwKHRoaXMuY2VudGVyLCB0aGlzLnpvb20pOyAvLyDliJ3lp4vljJbpobXpnaLlkI7nm7TmjqXliJ3lp4vljJblnLDlm74NCiAgLy8gfSwNCiAgbW91bnRlZCgpIHsNCiAgICB0aGlzLmdldExvY2F0aW9uKCk7DQogICAgaWYgKHdpbmRvdy5vbmxvYWQpIHsNCiAgICAgIHRoaXMuaW5pdE1hcCh0aGlzLmNlbnRlciwgdGhpcy56b29tKTsNCiAgICB9IGVsc2Ugew0KICAgICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoImxvYWQiLCAoKSA9PiB7DQogICAgICAgIHRoaXMuaW5pdE1hcCh0aGlzLmNlbnRlciwgdGhpcy56b29tKTsNCiAgICAgIH0pOw0KICAgIH0NCiAgfSwNCiAgbWV0aG9kczogew0KICAgIGdldExvY2F0aW9uKCkgew0KICAgICAgcmVxdWVzdC5nZXQoIi9kaXNwYXRjaC9nZXRHUFNMb2NhdGlvbiIpLnRoZW4oKHJlcykgPT4gew0KICAgICAgICB0aGlzLmxvY2F0aW9uRGF0YSA9IHJlcy5kYXRhLmRhdGE7DQoNCiAgICAgICAgZm9yIChsZXQgaW5kZXggPSAwOyBpbmRleCA8IHRoaXMubG9jYXRpb25EYXRhLmxlbmd0aDsgaW5kZXgrKykgew0KICAgICAgICAgIGNvbnN0IGVsZW1lbnQgPSB0aGlzLmxvY2F0aW9uRGF0YVtpbmRleF07DQogICAgICAgICAgdGhpcy5sb2NhdGlvbkxpc3QucHVzaCh7DQogICAgICAgICAgICBpbmRleDogaW5kZXgsDQogICAgICAgICAgICBsYXRpdHVlOiBlbGVtZW50LmxhdGl0dWUsDQogICAgICAgICAgICBsb25naXR1ZTogZWxlbWVudC5sb25naXR1ZSwNCiAgICAgICAgICB9KTsNCiAgICAgICAgICAvLyB0aGlzLnBvaW50LmxhdGl0dWUgPSBlbGVtZW50LmxhdGl0dWU7DQogICAgICAgICAgLy8gdGhpcy5wb2ludC5sb25naXR1ZSA9IGVsZW1lbnQubG9uZ2l0dWU7DQogICAgICAgICAgLy8gdGhpcy5wb2ludHMucHVzaCh0aGlzLnBvaW50KTsNCiAgICAgICAgICAvLyB0aGlzLnBvaW50ID0ge307DQogICAgICAgICAgdGhpcy5tYXJrZXJMYXllcnMucHVzaCh7DQogICAgICAgICAgICBpZDogZWxlbWVudC50YXJnZXRJZCwNCiAgICAgICAgICAgIHN0eWxlSWQ6ICJteXN0eWxlIiwNCiAgICAgICAgICAgIHBvc2l0aW9uOiBuZXcgd2luZG93LlRNYXAuTGF0TG5nKGVsZW1lbnQubG9uZ2l0dWUsIGVsZW1lbnQubGF0aXR1ZSksDQogICAgICAgICAgICBwcm9wZXJ0aWVzOiB7fSwgLy8g6Ieq5a6a5LmJ5bGe5oCn77yM5Y+v5Lul5rKh5pyJDQogICAgICAgICAgfSk7DQogICAgICAgICAgdGhpcy5nZW9tZXRyeS5pZD1lbGVtZW50LnRhcmdldElkDQogICAgICAgICAgdGhpcy5nZW9tZXRyeS5zdHlsZUlkPSJteXN0eWxlIg0KICAgICAgICAgIHRoaXMuZ2VvbWV0cnkucG9zaXRpb249IG5ldyB3aW5kb3cuVE1hcC5MYXRMbmcoZWxlbWVudC5sb25naXR1ZSwgZWxlbWVudC5sYXRpdHVlKQ0KICAgICAgICAgDQogICAgICAgICAgdGhpcy5nZW9tZXRyaWVzLnB1c2godGhpcy5nZW9tZXRyeSk7DQogICAgICAgICAgdGhpcy5nZW9tZXRyeT17fQ0KDQogICAgICAgIH0NCiAgICAgICAgY29uc29sZS5sb2coIHRoaXMuZ2VvbWV0cmllcykNCiAgICAgIH0pOw0KICAgIH0sDQogICAgaW5pdE1hcChjZW50ZXIsIHpvb20pIHsNCiAgICAgIHRoaXMubWFwID0gbmV3IHdpbmRvdy5UTWFwLk1hcChkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgiY29udGFpbmVyIiksIHsNCiAgICAgICAgY2VudGVyOiBjZW50ZXIsIC8v6K6+572u5Zyw5Zu+5Lit5b+D54K55Z2Q5qCHDQogICAgICAgIHpvb206IHpvb20sIC8v6K6+572u5Zyw5Zu+57yp5pS+57qn5YirDQogICAgICAgIHBpdGNoOiA0My41LCAvL+iuvue9ruS/r+S7sOinkg0KICAgICAgICByb3RhdGlvbjogNDUsIC8v6K6+572u5Zyw5Zu+5peL6L2s6KeS5bqmDQogICAgICB9KTsNCg0KICAgICAgdGhpcy5tYXJrZXJMYXllcnMgPSBuZXcgd2luZG93LlRNYXAuTXVsdGlNYXJrZXIoew0KICAgICAgICAvLyDliJvlu7rmoIforrDlsYINCiAgICAgICAgbWFwOiB0aGlzLm1hcCwgLy/mjIflrprlnLDlm77lrrnlmagNCiAgICAgICAgZ2VvbWV0cmllczogdGhpcy5nZW9tZXRyaWVzLA0KICAgICAgICBzdHlsZXM6IHsNCiAgICAgICAgICAvLyDngrnmoIforrDmoLflvI8NCiAgICAgICAgICBteXN0eWxlOiBuZXcgd2luZG93LlRNYXAuTWFya2VyU3R5bGUoew0KICAgICAgICAgICAgd2lkdGg6IDIwLA0KICAgICAgICAgICAgaGVpZ2h0OiAzMCwNCiAgICAgICAgICAgIGFuY2hvcjogeyB4OiAxMCwgeTogMzAgfSwNCiAgICAgICAgICAgIG9wYWNpdHk6IDAuNSwNCiAgICAgICAgICB9KSwNCiAgICAgICAgfSwNCiAgICAgIH0pOw0KICAgICAgLy8gdGhpcy5mb3JMaXN0KCk7DQogICAgfSwNCiAgICAvL+W+queOr+a3u+WKoOagh+iusOeCuQ0KICAgIC8vIGZvckxpc3QoKXsNCg0KICAgIC8vICAgZm9yIChsZXQgaW5kZXggPSAwOyBpbmRleCA8IHRoaXMubG9jYXRpb25MaXN0Lmxlbmd0aDsgaW5kZXgrKykgew0KICAgIC8vICAgICBjb25zdCBlbGVtZW50ID0gdGhpcy5sb2NhdGlvbkxpc3RbaW5kZXhdOw0KICAgIC8vICAgICBjb25zb2xlLmxvZyhlbGVtZW50KTsNCiAgICAvLyAgICAgICB0aGlzLmFkZFBvaW50KGVsZW1lbnQpOw0KICAgIC8vICAgfQ0KICAgIC8vIH0sDQoNCiAgICAvLyDmt7vliqDngrnmoIforrANCiAgICAvLyBhZGRQb2ludChsb2NhdGlvbikgeyAvLyDkuIDkuKpwb2ludOmcgOimgeaciWlk5ZKM5Z2Q5qCHDQoNCiAgICAvLyAgICAgdGhpcy5tYXJrZXJMYXllcnMuYWRkKA0KICAgIC8vICAgICAgICAgew0KICAgIC8vICAgICAgICAgICAgICdpZCc6IHBvaW50W2xvY2F0aW9uLmluZGV4XSwNCiAgICAvLyAgICAgICAgICAgICAnc3R5bGVJZCc6ICdteXN0eWxlJywNCiAgICAvLyAgICAgICAgICAgICAicG9zaXRpb24iOiBuZXcgd2luZG93LlRNYXAuTGF0TG5nKGxvY2F0aW9uLmxhdGl0dWUsIGxvY2F0aW9uLmxvbmdpdHVlKSwNCiAgICAvLyAgICAgICAgICAgICAicHJvcGVydGllcyI6e30gLy8g6Ieq5a6a5LmJ5bGe5oCn77yM5Y+v5Lul5rKh5pyJDQogICAgLy8gICAgICAgICB9DQogICAgLy8gICAgICkNCiAgICAvLyB9LA0KICB9LA0KfTsNCg=="},{"version":3,"sources":["LocationShow.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;AAqBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"LocationShow.vue","sourceRoot":"src/components","sourcesContent":["<template>\r\n  <body>\r\n    <div id=\"container\"></div>\r\n  </body>\r\n</template>\r\n\r\n<style scoped>\r\n#container {\r\n  /*地图(容器)显示大小*/ /*设置为全屏，位于最下层*/\r\n  width: width;\r\n  height: height;\r\n  /* position: absolute; */\r\n  top: 0px;\r\n  bottom: 0px;\r\n  left: 0px;\r\n  right: 0px;\r\n  z-index: 0;\r\n}\r\n</style>\r\n\r\n<script>\r\nimport request from \"@/utils/request\";\r\nexport default {\r\n  props: [\"boHeight\", \"boxWith\"],\r\n  data() {\r\n    return {\r\n      // markerUrl: require(\"../assets/marker.png\"),  // 点标记图片路径\r\n      map: \"\",\r\n      zoom: 17.2, // 地图一开始的缩放级别\r\n      center: new window.TMap.LatLng(31.683617, 118.558927), // 地图一开始的中心点\r\n      points: [],\r\n      point: {\r\n        id: \"\",\r\n        latitue: \"\",\r\n        longitue: \"\",\r\n      },\r\n      geometry: {\r\n        id: \"\", //点标记唯一标识，后续如果有删除、修改位置等操作，都需要此id\r\n        styleId: \"mystyle\", //指定样式id\r\n        position: Object, //点标记坐标位置\r\n      },\r\n      geometries: [],\r\n      markerLayers: [],\r\n      markerLayer: {},\r\n      locationData: [],\r\n      locationList: [],\r\n    };\r\n  },\r\n  // created() {\r\n  //   this.getLocation();\r\n  //   console.log(this.points)\r\n  //   this.initMap(this.center, this.zoom); // 初始化页面后直接初始化地图\r\n  // },\r\n  mounted() {\r\n    this.getLocation();\r\n    if (window.onload) {\r\n      this.initMap(this.center, this.zoom);\r\n    } else {\r\n      window.addEventListener(\"load\", () => {\r\n        this.initMap(this.center, this.zoom);\r\n      });\r\n    }\r\n  },\r\n  methods: {\r\n    getLocation() {\r\n      request.get(\"/dispatch/getGPSLocation\").then((res) => {\r\n        this.locationData = res.data.data;\r\n\r\n        for (let index = 0; index < this.locationData.length; index++) {\r\n          const element = this.locationData[index];\r\n          this.locationList.push({\r\n            index: index,\r\n            latitue: element.latitue,\r\n            longitue: element.longitue,\r\n          });\r\n          // this.point.latitue = element.latitue;\r\n          // this.point.longitue = element.longitue;\r\n          // this.points.push(this.point);\r\n          // this.point = {};\r\n          this.markerLayers.push({\r\n            id: element.targetId,\r\n            styleId: \"mystyle\",\r\n            position: new window.TMap.LatLng(element.longitue, element.latitue),\r\n            properties: {}, // 自定义属性，可以没有\r\n          });\r\n          this.geometry.id=element.targetId\r\n          this.geometry.styleId=\"mystyle\"\r\n          this.geometry.position= new window.TMap.LatLng(element.longitue, element.latitue)\r\n         \r\n          this.geometries.push(this.geometry);\r\n          this.geometry={}\r\n\r\n        }\r\n        console.log( this.geometries)\r\n      });\r\n    },\r\n    initMap(center, zoom) {\r\n      this.map = new window.TMap.Map(document.getElementById(\"container\"), {\r\n        center: center, //设置地图中心点坐标\r\n        zoom: zoom, //设置地图缩放级别\r\n        pitch: 43.5, //设置俯仰角\r\n        rotation: 45, //设置地图旋转角度\r\n      });\r\n\r\n      this.markerLayers = new window.TMap.MultiMarker({\r\n        // 创建标记层\r\n        map: this.map, //指定地图容器\r\n        geometries: this.geometries,\r\n        styles: {\r\n          // 点标记样式\r\n          mystyle: new window.TMap.MarkerStyle({\r\n            width: 20,\r\n            height: 30,\r\n            anchor: { x: 10, y: 30 },\r\n            opacity: 0.5,\r\n          }),\r\n        },\r\n      });\r\n      // this.forList();\r\n    },\r\n    //循环添加标记点\r\n    // forList(){\r\n\r\n    //   for (let index = 0; index < this.locationList.length; index++) {\r\n    //     const element = this.locationList[index];\r\n    //     console.log(element);\r\n    //       this.addPoint(element);\r\n    //   }\r\n    // },\r\n\r\n    // 添加点标记\r\n    // addPoint(location) { // 一个point需要有id和坐标\r\n\r\n    //     this.markerLayers.add(\r\n    //         {\r\n    //             'id': point[location.index],\r\n    //             'styleId': 'mystyle',\r\n    //             \"position\": new window.TMap.LatLng(location.latitue, location.longitue),\r\n    //             \"properties\":{} // 自定义属性，可以没有\r\n    //         }\r\n    //     )\r\n    // },\r\n  },\r\n};\r\n</script>"]}]}