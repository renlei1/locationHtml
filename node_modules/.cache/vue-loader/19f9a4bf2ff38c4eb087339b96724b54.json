{"remainingRequest":"E:\\WorkSpace\\SchoolProject\\dp_font\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!E:\\WorkSpace\\SchoolProject\\dp_font\\src\\components\\GroupManager.vue?vue&type=script&lang=js&","dependencies":[{"path":"E:\\WorkSpace\\SchoolProject\\dp_font\\src\\components\\GroupManager.vue","mtime":1610457854715},{"path":"E:\\WorkSpace\\SchoolProject\\dp_font\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"E:\\WorkSpace\\SchoolProject\\dp_font\\node_modules\\babel-loader\\lib\\index.js","mtime":315532800000},{"path":"E:\\WorkSpace\\SchoolProject\\dp_font\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"E:\\WorkSpace\\SchoolProject\\dp_font\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KDQppbXBvcnQgcmVxdWVzdCBmcm9tICJAL3V0aWxzL3JlcXVlc3QiOw0KZXhwb3J0IGRlZmF1bHQgew0KICBuYW1lOiAiR3JvdXBNYW5hZ2VyIiwNCiAgZGF0YSgpIHsNCiAgICB2YXIgdmFsaWRhdGVHcm91cE5hbWUgPSAocnVsZSwgdmFsdWUsIGNhbGxiYWNrKSA9PiB7DQogICAgICBpZiAodmFsdWUgPT09ICIiKSB7DQogICAgICAgIGNhbGxiYWNrKG5ldyBFcnJvcigi6K+36L6T5YWl5YiG57uE5ZCN56ewIikpOw0KICAgICAgfSBlbHNlIHsNCiAgICAgICAgcmVxdWVzdA0KICAgICAgICAgIC5nZXQoIi9hcGkvZ3JvdXBzLyIgKyB2YWx1ZSkNCiAgICAgICAgICAudGhlbigoKSA9PiB7DQogICAgICAgICAgICBjYWxsYmFjayhuZXcgRXJyb3IoIuWQjeensOW3suWtmOWcqCIpKTsNCiAgICAgICAgICB9KQ0KICAgICAgICAgIC5jYXRjaCgoKSA9PiB7DQogICAgICAgICAgICBjYWxsYmFjaygpOw0KICAgICAgICAgIH0pOw0KICAgICAgfQ0KICAgIH07DQoNCiAgICByZXR1cm4gew0KICAgICAgdGFibGVEYXRhOiBbXSwNCiAgICAgIGN1cnJlbnRSb3c6IHt9LA0KICAgICAgZ3JvdXBVc2VydGFibGVEYXRhOiBbXSwNCiAgICAgIGhpZGVQYWdlOiB0cnVlLA0KICAgICAgZ3JvdXBVc2VyUGFnZTogew0KICAgICAgICB0b3RhbDogMCwNCiAgICAgICAgcGFnZVNpemU6IDksDQogICAgICAgIGN1cnJlbnRQYWdlOiAxLA0KICAgICAgfSwNCiAgICAgIHJ1bGVGb3JtOiB7DQogICAgICAgIGdyb3VwTmFtZTogIiIsDQogICAgICB9LA0KICAgICAgcnVsZXM6IHsNCiAgICAgICAgZ3JvdXBOYW1lOiBbeyB2YWxpZGF0b3I6IHZhbGlkYXRlR3JvdXBOYW1lLCB0cmlnZ2VyOiAiYmx1ciIgfV0sDQogICAgICB9LA0KICAgICAgdG90YWw6IDAsDQogICAgICBwYWdlU2l6ZTogOSwNCiAgICAgIGN1cnJlbnRQYWdlOiAxLA0KICAgICAgZGlhbG9nVmlzaWJsZTogZmFsc2UsDQogICAgICBkaWFsb2dOYW1lOiAi5Yib5bu65YiG57uEIiwNCiAgICB9Ow0KICB9LA0KICBtZXRob2RzOiB7DQogICAgY29tZmlybUdyb3VwKCkgew0KICAgICAgY29uc29sZS5sb2coImNvbmZpcm0iKTsNCiAgICAgIHRoaXMuJHJlZnNbInJ1bGVGb3JtIl0udmFsaWRhdGUoKHZhbGlkKSA9PiB7DQogICAgICAgIGlmICh2YWxpZCkgew0KICAgICAgICAgIGlmICh0aGlzLmRpYWxvZ05hbWUgPT0gIuWIm+W7uuWIhue7hCIpIHsNCiAgICAgICAgICAgIHJlcXVlc3QNCiAgICAgICAgICAgICAgLnBvc3QoIi9hcGkvZ3JvdXBzP2FjdGlvbj1jcmVhdGVHcm91cCIsIHsNCiAgICAgICAgICAgICAgICBncm91cE5hbWU6IHRoaXMucnVsZUZvcm0uZ3JvdXBOYW1lLA0KICAgICAgICAgICAgICB9KQ0KICAgICAgICAgICAgICAudGhlbigoKSA9PiB7DQogICAgICAgICAgICAgICAgdGhpcy4kbWVzc2FnZSh7DQogICAgICAgICAgICAgICAgICBtZXNzYWdlOiAi5re75Yqg5oiQ5YqfIiwNCiAgICAgICAgICAgICAgICAgIHR5cGU6ICJzdWNjZXNzIiwNCiAgICAgICAgICAgICAgICB9KTsNCiAgICAgICAgICAgICAgICB0aGlzLkN1cnJlbnRDaGFuZ2UoTWF0aC5jZWlsKCh0aGlzLnRvdGFsICsgMSkgLyB0aGlzLnBhZ2VTaXplKSk7DQogICAgICAgICAgICAgICAgdGhpcy5kaWFsb2dWaXNpYmxlID0gZmFsc2U7DQogICAgICAgICAgICAgIH0pDQogICAgICAgICAgICAgIC5jYXRjaCgocmVzcG9uc2UpID0+IHsNCiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhyZXNwb25zZSk7DQogICAgICAgICAgICAgIH0pOw0KICAgICAgICAgIH0gZWxzZSBpZiAodGhpcy5kaWFsb2dOYW1lID09ICLkv67mlLnliIbnu4QiKSB7DQogICAgICAgICAgICByZXF1ZXN0DQogICAgICAgICAgICAgIC5wYXRjaCgNCiAgICAgICAgICAgICAgICAiL2FwaS9ncm91cHMvIiArIHRoaXMuY3VycmVudFJvdy5uYW1lICsgIj9hY3Rpb249ZWRpdE5hbWUiLA0KICAgICAgICAgICAgICAgIHsNCiAgICAgICAgICAgICAgICAgIGlkOiB0aGlzLmN1cnJlbnRSb3cuaWQsDQogICAgICAgICAgICAgICAgICBuYW1lOiB0aGlzLnJ1bGVGb3JtLmdyb3VwTmFtZSwNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICkNCiAgICAgICAgICAgICAgLnRoZW4oKCkgPT4gew0KICAgICAgICAgICAgICAgIHRoaXMuQ3VycmVudENoYW5nZSh0aGlzLmN1cnJlbnRQYWdlKTsNCiAgICAgICAgICAgICAgICB0aGlzLCAodGhpcy5kaWFsb2dWaXNpYmxlID0gZmFsc2UpOw0KICAgICAgICAgICAgICB9KTsNCiAgICAgICAgICB9DQogICAgICAgIH0gZWxzZSB7DQogICAgICAgICAgY29uc29sZS5sb2coImVycm9yIHN1Ym1pdCIpOw0KICAgICAgICAgIHJldHVybiBmYWxzZTsNCiAgICAgICAgfQ0KICAgICAgfSk7DQogICAgfSwNCiAgICBlZGl0R3JvdXAoaW5kZXgsIHJvdykgew0KICAgICAgY29uc29sZS5sb2coaW5kZXgsIHJvdyk7DQogICAgICB0aGlzLmRpYWxvZ05hbWUgPSAi5L+u5pS55YiG57uEIjsNCiAgICAgIHRoaXMucnVsZUZvcm0uZ3JvdXBOYW1lID0gcm93Lm5hbWU7DQogICAgICB0aGlzLmRpYWxvZ1Zpc2libGUgPSB0cnVlOw0KICAgIH0sDQogICAgaW5pdERhdGEoKSB7DQogICAgICByZXF1ZXN0DQogICAgICAgIC5nZXQoIi9hcGkvZ3JvdXBzP3BhZ2U9MSZzaXplPSIgKyB0aGlzLnBhZ2VTaXplKQ0KICAgICAgICAudGhlbigocmVzcG9uc2UpID0+IHsNCiAgICAgICAgICB0aGlzLnRhYmxlRGF0YSA9IHJlc3BvbnNlLmRhdGEucmVzdWx0czsNCiAgICAgICAgICB0aGlzLnRvdGFsID0gcmVzcG9uc2UuZGF0YS5jb3VudDsNCiAgICAgICAgICBjb25zb2xlLmxvZyhyZXNwb25zZSk7DQogICAgICAgIH0pOw0KICAgIH0sDQogICAgQ3VycmVudENoYW5nZShwYWdlKSB7DQogICAgICB0aGlzLmN1cnJlbnRQYWdlID0gcGFnZTsNCiAgICAgIHJlcXVlc3QNCiAgICAgICAgLmdldCgiYXBpL2dyb3Vwcz9wYWdlPSIgKyBwYWdlICsgIiZzaXplPSIgKyB0aGlzLnBhZ2VTaXplKQ0KICAgICAgICAudGhlbigocmVzcG9uc2UpID0+IHsNCiAgICAgICAgICB0aGlzLnRhYmxlRGF0YSA9IHJlc3BvbnNlLmRhdGEucmVzdWx0czsNCiAgICAgICAgICB0aGlzLnRvdGFsID0gcmVzcG9uc2UuZGF0YS5jb3VudDsNCiAgICAgICAgfSk7DQogICAgfSwNCiAgICBncm91cFVzZXJDdXJyZW50Q2hhbmdlKHBhZ2UpIHsNCiAgICAgIHRoaXMuZ3JvdXBVc2VyUGFnZS5jdXJyZW50UGFnZSA9IHBhZ2U7DQogICAgICByZXF1ZXN0DQogICAgICAgIC5nZXQoDQogICAgICAgICAgIi9hcGkvZ3JvdXBzLyIgKw0KICAgICAgICAgICAgdGhpcy5jdXJyZW50Um93Lm5hbWUgKw0KICAgICAgICAgICAgIj9wYWdlPSIgKw0KICAgICAgICAgICAgdGhpcy5ncm91cFVzZXJQYWdlLmN1cnJlbnRQYWdlICsNCiAgICAgICAgICAgICImc2l6ZT0iICsNCiAgICAgICAgICAgIHRoaXMuZ3JvdXBVc2VyUGFnZS5wYWdlU2l6ZQ0KICAgICAgICApDQogICAgICAgIC50aGVuKChyZXNwb25zZSkgPT4gew0KICAgICAgICAgIHRoaXMuZ3JvdXBVc2VydGFibGVEYXRhID0gcmVzcG9uc2UuZGF0YS5yZXN1bHRzOw0KICAgICAgICAgIHRoaXMuZ3JvdXBVc2VyUGFnZS50b3RhbCA9IHJlc3BvbnNlLmRhdGEuY291bnQ7DQogICAgICAgIH0pOw0KICAgIH0sDQogICAgc2hvd0dyb3VwVXNlcihpbmRleCwgcm93KSB7DQogICAgICB0aGlzLmN1cnJlbnRSb3cgPSByb3c7DQogICAgICBjb25zb2xlLmxvZyh0aGlzLmN1cnJlbnRSb3cpOw0KICAgICAgcmVxdWVzdA0KICAgICAgICAuZ2V0KA0KICAgICAgICAgICIvYXBpL2dyb3Vwcy8iICsNCiAgICAgICAgICAgIHRoaXMuY3VycmVudFJvdy5uYW1lICsNCiAgICAgICAgICAgICI/c2l6ZT0iICsNCiAgICAgICAgICAgIHRoaXMuZ3JvdXBVc2VyUGFnZS5wYWdlU2l6ZQ0KICAgICAgICApDQogICAgICAgIC50aGVuKChyZXNwb25zZSkgPT4gew0KICAgICAgICAgIHRoaXMuZ3JvdXBVc2VydGFibGVEYXRhID0gcmVzcG9uc2UuZGF0YS5yZXN1bHRzOw0KICAgICAgICAgIHRoaXMuZ3JvdXBVc2VyUGFnZS50b3RhbCA9IHJlc3BvbnNlLmRhdGEuY291bnQ7DQogICAgICAgIH0pOw0KICAgIH0sDQogICAgcmVtb3ZlR3JvdXAoaW5kZXgsIHJvdykgew0KICAgICAgY29uc29sZS5sb2cocm93Lm5hbWUpOw0KICAgICAgcmVxdWVzdC5kZWxldGUoIi9hcGkvZ3JvdXBzLyIgKyByb3cubmFtZSkudGhlbigoKSA9PiB7DQogICAgICAgIHRoaXMuQ3VycmVudENoYW5nZSh0aGlzLmN1cnJlbnRQYWdlKTsNCiAgICAgICAgdGhpcy4kbWVzc2FnZSh7DQogICAgICAgICAgbWVzc2FnZTogIuWIoOmZpOaIkOWKnyIsDQogICAgICAgICAgdHlwZTogInN1Y2Nlc3MiLA0KICAgICAgICB9KTsNCiAgICAgIH0pOw0KICAgIH0sDQogICAgcmVtb3ZlR3JvdXBVc2VyKGluZGV4LCByb3cpIHsNCiAgICAgIGNvbnNvbGUubG9nKGluZGV4LCByb3cpOw0KICAgICAgcmVxdWVzdA0KICAgICAgICAucGF0Y2goIi9hcGkvZ3JvdXBzLyIgKyB0aGlzLmN1cnJlbnRSb3cubmFtZSArICI/YWN0aW9uPWVkaXRVc2VyIiwgew0KICAgICAgICAgIHVzZXJuYW1lOiByb3cudXNlcm5hbWUsDQogICAgICAgIH0pDQogICAgICAgIC50aGVuKCgpID0+IHsNCiAgICAgICAgICB0aGlzLmdyb3VwVXNlckN1cnJlbnRDaGFuZ2UodGhpcy5ncm91cFVzZXJQYWdlLmN1cnJlbnRQYWdlKTsNCiAgICAgICAgICB0aGlzLiRtZXNzYWdlKHsNCiAgICAgICAgICAgIG1lc3NhZ2U6ICLnp7vlh7rmiJDlip8iLA0KICAgICAgICAgICAgdHlwZTogInN1Y2Nlc3MiLA0KICAgICAgICAgIH0pOw0KICAgICAgICB9KTsNCiAgICB9LA0KICAgIGhhbmRsZUN1cnJlbnRDaGFuZ2UodmFsKSB7DQogICAgICB0aGlzLmN1cnJlbnRSb3cgPSB2YWw7DQogICAgfSwNCiAgfSwNCiAgbW91bnRlZCgpIHsNCiAgICB0aGlzLmluaXREYXRhKCk7DQogIH0sDQp9Ow0K"},{"version":3,"sources":["GroupManager.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA6HA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"GroupManager.vue","sourceRoot":"src/components","sourcesContent":["<template>\r\n  <div>\r\n    <el-row type=\"flex\" justify=\"space-around\">\r\n      <el-col :span=\"9\" style=\"display: flex; align-items: center\">\r\n        <el-button\r\n          type=\"primary\"\r\n          size=\"mini\"\r\n          @click=\"\r\n            dialogVisible = true;\r\n            dialogName = '创建分组';\r\n            ruleForm.groupName = '';\r\n          \"\r\n          >新建分组</el-button\r\n        >\r\n      </el-col>\r\n      <el-col :span=\"12\">\r\n        <h4>该组用户</h4>\r\n      </el-col>\r\n    </el-row>\r\n    <el-row type=\"flex\" justify=\"space-around\">\r\n      <el-col :span=\"9\">\r\n        <div style=\"width: auto\">\r\n          <el-table\r\n            :data=\"tableData\"\r\n            style=\"width: 100%\"\r\n            @current-change=\"handleCurrentChange\"\r\n          >\r\n            <el-table-column prop=\"id\" label=\"ID\" width=\"80\"></el-table-column>\r\n            <el-table-column\r\n              prop=\"name\"\r\n              label=\"组名\"\r\n              width=\"120\"\r\n            ></el-table-column>\r\n            <el-table-column label=\"操作\" width=\"auto\">\r\n              <template slot-scope=\"scope\">\r\n                <el-button\r\n                  size=\"mini\"\r\n                  type=\"primary\"\r\n                  @click=\"editGroup(scope.$index, scope.row)\"\r\n                  ><i class=\"el-icon-edit\"></i>编辑</el-button\r\n                >\r\n                <el-button\r\n                  size=\"mini\"\r\n                  type=\"danger\"\r\n                  @click=\"removeGroup(scope.$index, scope.row)\"\r\n                  ><i class=\"el-icon-delete\"></i>删除</el-button\r\n                >\r\n                <el-button\r\n                  size=\"mini\"\r\n                  type=\"success\"\r\n                  @click=\"showGroupUser(scope.$index, scope.row)\"\r\n                  ><i class=\"el-icon-view\"></i>查看用户</el-button\r\n                >\r\n              </template>\r\n            </el-table-column>\r\n          </el-table>\r\n          <div class=\"block\">\r\n            <el-pagination\r\n              layout=\"prev, pager, next\"\r\n              :page-size=\"pageSize\"\r\n              :total=\"total\"\r\n              :current-page.sync=\"currentPage\"\r\n              @current-change=\"CurrentChange\"\r\n              :hide-on-single-page=\"hidePage\"\r\n              style=\"text-align: right\"\r\n            >\r\n            </el-pagination>\r\n          </div>\r\n        </div>\r\n      </el-col>\r\n      <el-col :span=\"12\">\r\n        <el-table :data=\"groupUsertableData\" style=\"width: 90%\">\r\n          <el-table-column prop=\"id\" label=\"ID\" width=\"80\"> </el-table-column>\r\n          <el-table-column prop=\"username\" label=\"用户名\" width=\"120\">\r\n          </el-table-column>\r\n          <el-table-column prop=\"email\" label=\"邮箱\" width=\"200\">\r\n          </el-table-column>\r\n          <el-table-column label=\"操作\">\r\n            <template slot-scope=\"scope\">\r\n              <el-button\r\n                size=\"mini\"\r\n                type=\"warning\"\r\n                @click=\"removeGroupUser(scope.$index, scope.row)\"\r\n                ><i class=\"el-icon-remove-outline\"></i>移出分组</el-button\r\n              >\r\n            </template>\r\n          </el-table-column>\r\n        </el-table>\r\n        <el-pagination\r\n          layout=\"prev, pager, next\"\r\n          :page-size=\"groupUserPage.pageSize\"\r\n          :total=\"groupUserPage.total\"\r\n          :current-page.sync=\"groupUserPage.currentPage\"\r\n          @current-change=\"groupUserCurrentChange\"\r\n          :hide-on-single-page=\"hidePage\"\r\n          style=\"text-align: right\"\r\n        >\r\n        </el-pagination>\r\n      </el-col>\r\n    </el-row>\r\n\r\n    <el-dialog :title=\"dialogName\" :visible.sync=\"dialogVisible\" width=\"35%\">\r\n      <el-form\r\n        :model=\"ruleForm\"\r\n        :rules=\"rules\"\r\n        ref=\"ruleForm\"\r\n        label-width=\"100px\"\r\n        class=\"demo-ruleForm\"\r\n      >\r\n        <el-form-item label=\"分组名称\" prop=\"groupName\">\r\n          <el-input v-model=\"ruleForm.groupName\"></el-input>\r\n        </el-form-item>\r\n      </el-form>\r\n\r\n      <span slot=\"footer\" class=\"dialog-footer\">\r\n        <el-button @click=\"dialogVisible = false\" size=\"mini\">取 消</el-button>\r\n        <el-button type=\"primary\" @click=\"comfirmGroup\" size=\"mini\"\r\n          >确 定</el-button\r\n        >\r\n      </span>\r\n    </el-dialog>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport request from \"@/utils/request\";\r\nexport default {\r\n  name: \"GroupManager\",\r\n  data() {\r\n    var validateGroupName = (rule, value, callback) => {\r\n      if (value === \"\") {\r\n        callback(new Error(\"请输入分组名称\"));\r\n      } else {\r\n        request\r\n          .get(\"/api/groups/\" + value)\r\n          .then(() => {\r\n            callback(new Error(\"名称已存在\"));\r\n          })\r\n          .catch(() => {\r\n            callback();\r\n          });\r\n      }\r\n    };\r\n\r\n    return {\r\n      tableData: [],\r\n      currentRow: {},\r\n      groupUsertableData: [],\r\n      hidePage: true,\r\n      groupUserPage: {\r\n        total: 0,\r\n        pageSize: 9,\r\n        currentPage: 1,\r\n      },\r\n      ruleForm: {\r\n        groupName: \"\",\r\n      },\r\n      rules: {\r\n        groupName: [{ validator: validateGroupName, trigger: \"blur\" }],\r\n      },\r\n      total: 0,\r\n      pageSize: 9,\r\n      currentPage: 1,\r\n      dialogVisible: false,\r\n      dialogName: \"创建分组\",\r\n    };\r\n  },\r\n  methods: {\r\n    comfirmGroup() {\r\n      console.log(\"confirm\");\r\n      this.$refs[\"ruleForm\"].validate((valid) => {\r\n        if (valid) {\r\n          if (this.dialogName == \"创建分组\") {\r\n            request\r\n              .post(\"/api/groups?action=createGroup\", {\r\n                groupName: this.ruleForm.groupName,\r\n              })\r\n              .then(() => {\r\n                this.$message({\r\n                  message: \"添加成功\",\r\n                  type: \"success\",\r\n                });\r\n                this.CurrentChange(Math.ceil((this.total + 1) / this.pageSize));\r\n                this.dialogVisible = false;\r\n              })\r\n              .catch((response) => {\r\n                console.log(response);\r\n              });\r\n          } else if (this.dialogName == \"修改分组\") {\r\n            request\r\n              .patch(\r\n                \"/api/groups/\" + this.currentRow.name + \"?action=editName\",\r\n                {\r\n                  id: this.currentRow.id,\r\n                  name: this.ruleForm.groupName,\r\n                }\r\n              )\r\n              .then(() => {\r\n                this.CurrentChange(this.currentPage);\r\n                this, (this.dialogVisible = false);\r\n              });\r\n          }\r\n        } else {\r\n          console.log(\"error submit\");\r\n          return false;\r\n        }\r\n      });\r\n    },\r\n    editGroup(index, row) {\r\n      console.log(index, row);\r\n      this.dialogName = \"修改分组\";\r\n      this.ruleForm.groupName = row.name;\r\n      this.dialogVisible = true;\r\n    },\r\n    initData() {\r\n      request\r\n        .get(\"/api/groups?page=1&size=\" + this.pageSize)\r\n        .then((response) => {\r\n          this.tableData = response.data.results;\r\n          this.total = response.data.count;\r\n          console.log(response);\r\n        });\r\n    },\r\n    CurrentChange(page) {\r\n      this.currentPage = page;\r\n      request\r\n        .get(\"api/groups?page=\" + page + \"&size=\" + this.pageSize)\r\n        .then((response) => {\r\n          this.tableData = response.data.results;\r\n          this.total = response.data.count;\r\n        });\r\n    },\r\n    groupUserCurrentChange(page) {\r\n      this.groupUserPage.currentPage = page;\r\n      request\r\n        .get(\r\n          \"/api/groups/\" +\r\n            this.currentRow.name +\r\n            \"?page=\" +\r\n            this.groupUserPage.currentPage +\r\n            \"&size=\" +\r\n            this.groupUserPage.pageSize\r\n        )\r\n        .then((response) => {\r\n          this.groupUsertableData = response.data.results;\r\n          this.groupUserPage.total = response.data.count;\r\n        });\r\n    },\r\n    showGroupUser(index, row) {\r\n      this.currentRow = row;\r\n      console.log(this.currentRow);\r\n      request\r\n        .get(\r\n          \"/api/groups/\" +\r\n            this.currentRow.name +\r\n            \"?size=\" +\r\n            this.groupUserPage.pageSize\r\n        )\r\n        .then((response) => {\r\n          this.groupUsertableData = response.data.results;\r\n          this.groupUserPage.total = response.data.count;\r\n        });\r\n    },\r\n    removeGroup(index, row) {\r\n      console.log(row.name);\r\n      request.delete(\"/api/groups/\" + row.name).then(() => {\r\n        this.CurrentChange(this.currentPage);\r\n        this.$message({\r\n          message: \"删除成功\",\r\n          type: \"success\",\r\n        });\r\n      });\r\n    },\r\n    removeGroupUser(index, row) {\r\n      console.log(index, row);\r\n      request\r\n        .patch(\"/api/groups/\" + this.currentRow.name + \"?action=editUser\", {\r\n          username: row.username,\r\n        })\r\n        .then(() => {\r\n          this.groupUserCurrentChange(this.groupUserPage.currentPage);\r\n          this.$message({\r\n            message: \"移出成功\",\r\n            type: \"success\",\r\n          });\r\n        });\r\n    },\r\n    handleCurrentChange(val) {\r\n      this.currentRow = val;\r\n    },\r\n  },\r\n  mounted() {\r\n    this.initData();\r\n  },\r\n};\r\n</script>"]}]}