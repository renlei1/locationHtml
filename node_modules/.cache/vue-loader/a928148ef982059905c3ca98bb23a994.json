{"remainingRequest":"E:\\WorkSpace\\SchoolProject\\dp_font\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!E:\\WorkSpace\\SchoolProject\\dp_font\\src\\components\\RegisterComponent.vue?vue&type=script&lang=js&","dependencies":[{"path":"E:\\WorkSpace\\SchoolProject\\dp_font\\src\\components\\RegisterComponent.vue","mtime":1610504330561},{"path":"E:\\WorkSpace\\SchoolProject\\dp_font\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"E:\\WorkSpace\\SchoolProject\\dp_font\\node_modules\\babel-loader\\lib\\index.js","mtime":315532800000},{"path":"E:\\WorkSpace\\SchoolProject\\dp_font\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"E:\\WorkSpace\\SchoolProject\\dp_font\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KDQppbXBvcnQgcmVxdWVzdCBmcm9tICdAL3V0aWxzL3JlcXVlc3QnDQpleHBvcnQgZGVmYXVsdCB7DQogIG5hbWU6ICJSZWdpc3RlckNvbXBvbmVudCIsDQogIGRhdGEoKSB7DQogICAgdmFyIGNoZWNrUGFzczEgPSAocnVsZSwgdmFsdWUsIGNhbGxiYWNrKSA9PiB7DQogICAgICAgIGlmICh2YWx1ZSA9PT0gJycpIHsNCiAgICAgICAgICBjYWxsYmFjayhuZXcgRXJyb3IoJ+ivt+i+k+WFpeWvhueggScpKTsNCiAgICAgICAgfSBlbHNlIHsNCiAgICAgICAgICBpZiAodGhpcy5ydWxlRm9ybS5jaGVja1Bhc3MgIT09ICcnKSB7DQogICAgICAgICAgICB0aGlzLiRyZWZzLnJ1bGVGb3JtLnZhbGlkYXRlRmllbGQoJ3JlcGVhdFBhc3N3b3JkJyk7DQogICAgICAgICAgfQ0KICAgICAgICAgIGNhbGxiYWNrKCk7DQogICAgICAgIH0NCiAgICAgIH07ICANCiAgICB2YXIgY2hlY2tQYXNzMiA9IChydWxlLCB2YWx1ZSwgY2FsbGJhY2spID0+IHsNCiAgICAgICAgaWYgKHZhbHVlID09PSAnJykgew0KICAgICAgICAgICAgY2FsbGJhY2sobmV3IEVycm9yKCfor7flho3mrKHovpPlhaXlr4bnoIEnKSk7DQogICAgICAgIH0gZWxzZSBpZiAodmFsdWUgIT09IHRoaXMucnVsZUZvcm0ucGFzc3dvcmQpIHsNCiAgICAgICAgICAgIGNhbGxiYWNrKG5ldyBFcnJvcign5Lik5qyh6L6T5YWl5a+G56CB5LiN5LiA6Ie0IScpKTsNCiAgICAgICAgfSBlbHNlIHsNCiAgICAgICAgICAgIGNhbGxiYWNrKCk7DQogICAgICAgIH0NCiAgICB9Ow0KICAgIHZhciBjaGVja1VzciA9IChydWxlLCB2YWx1ZSwgY2FsbGJhY2spID0+IHsgICAgICAgDQogICAgICAgIGlmICh2YWx1ZSA9PT0gJycpIHsNCiAgICAgICAgICAgIGNhbGxiYWNrKG5ldyBFcnJvcign6K+36L6T5YWl55So5oi35ZCNJykpOw0KICAgICAgICB9IGVsc2Ugew0KICAgICAgICAgICAgcmVxdWVzdC5nZXQoJ3VzZXIvY2hlY2tVc2VyP3VzZXJuYW1lPScrdmFsdWUsIHt1c2VybmFtZTogdmFsdWV9KS50aGVuKChyZXNwb25zZSkgPT4gew0KICAgICAgICAgICAgICAgY29uc29sZS5sb2cocmVzcG9uc2UuZGF0YS5kYXRhKTsNCiAgICAgICAgICAgICAgIGlmIChyZXNwb25zZS5kYXRhLmRhdGE9PXRydWUpIGNhbGxiYWNrKG5ldyBFcnJvcign55So5oi35ZCN5bey5a2Y5ZyoIScpKTsNCiAgICAgICAgICAgICAgIGVsc2UgY2FsbGJhY2soKTsNCiAgICAgICAgICAgIH0pICAgICAgICAgDQogICAgICAgIH0NCiAgICB9Ow0KICAgIHJldHVybiB7DQogICAgICBydWxlRm9ybTogew0KICAgICAgICB1c2VybmFtZTogIiIsDQogICAgICAgIHBhc3N3b3JkOiAiIiwNCiAgICAgICAgZW1haWw6ICIiLA0KICAgICAgICByZXBlYXRQYXNzd29yZDogIiINCiAgICAgIH0sDQogICAgICBydWxlczogew0KICAgICAgICB1c2VybmFtZTogWw0KICAgICAgICAgIHsgdmFsaWRhdG9yOiBjaGVja1VzciwgdHJpZ2dlcjogImJsdXIiIH0NCiAgICAgICAgXSwNCiAgICAgICAgcGFzc3dvcmQ6IFsgICAgICAgICAgIA0KICAgICAgICAgICAgeyB2YWxpZGF0b3I6IGNoZWNrUGFzczEsIHRyaWdnZXI6ICJibHVyIiB9DQogICAgICAgIF0sICAgICAgDQogICAgICAgIGVtYWlsOiBbDQogICAgICAgICAgICB7IHR5cGU6ICdlbWFpbCcsIG1lc3NhZ2U6ICfor7fovpPlhaXmraPnoa7nmoTpgq7nrrHlnLDlnYAnLCB0cmlnZ2VyOiBbJ2JsdXInLCAnY2hhbmdlJ10gfQ0KICAgICAgICBdLA0KICAgICAgICByZXBlYXRQYXNzd29yZDogWyAgICAgICAgICANCiAgICAgICAgICAgIHsgdmFsaWRhdG9yOiBjaGVja1Bhc3MyLCB0cmlnZ2VyOiAiYmx1ciIgfQ0KICAgICAgICBdDQogICAgICB9LA0KICAgIH07ICAgDQogIH0sDQogIG1ldGhvZHM6IHsNCiAgICBzdWJtaXRGb3JtKGZvcm1OYW1lKSB7DQogICAgICB0aGlzLiRyZWZzW2Zvcm1OYW1lXS52YWxpZGF0ZSgodmFsaWQpID0+IHsNCiAgICAgICAgaWYgKHZhbGlkKSB7DQogICAgICAgICAgcmVxdWVzdC5wb3N0KCd1c2Vycy9yZWdpc3RlcicsIHRoaXMucnVsZUZvcm0pLnRoZW4oKHJlc3BvbnNlKSA9PiB7DQogICAgICAgICAgICAgIGNvbnNvbGUubG9nKHJlc3BvbnNlKQ0KICAgICAgICAgICAgICB0aGlzLiRtZXNzYWdlKHsNCiAgICAgICAgICAgICAgICBtZXNzYWdlOiAn5rOo5YaM5oiQ5YqfLOivt+eZu+W9lScsDQogICAgICAgICAgICAgICAgdHlwZTogJ3N1Y2Nlc3MnDQogICAgICAgICAgICAgIH0pOw0KICAgICAgICAgICAgICB0aGlzLiRlbWl0KCdjaGFuZ2UtdGFiJykNCiAgICAgICAgICAgIH0pLmNhdGNoKChlcnJvcikgPT4gew0KICAgICAgICAgICAgICBjb25zb2xlLmxvZyhlcnJvcikNCiAgICAgICAgICAgICAgY29uc29sZS5sb2coZXJyb3IucmVzcG9uc2UuZGF0YVsndXNlcm5hbWUnXVswXSkNCiAgICAgICAgICAgICAgY29uc29sZS5sb2coZXJyb3IucmVzcG9uc2UuZGF0YVsncGFzc3dvcmQnXVswXSkNCiAgICAgICAgICAgIH0pDQogICAgICAgIH0gZWxzZSB7DQogICAgICAgICAgY29uc29sZS5sb2coImVycm9yIHN1Ym1pdCEhIik7DQogICAgICAgICAgcmV0dXJuIGZhbHNlOw0KICAgICAgICB9DQogICAgICB9KTsNCiAgICB9LA0KICAgIHJlc2V0Rm9ybShmb3JtTmFtZSkgew0KICAgICAgdGhpcy4kcmVmc1tmb3JtTmFtZV0ucmVzZXRGaWVsZHMoKTsNCiAgICB9LA0KICAgIA0KICB9LA0KfTsNCg=="},{"version":3,"sources":["RegisterComponent.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAyDA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA","file":"RegisterComponent.vue","sourceRoot":"src/components","sourcesContent":["<template>\r\n  <el-form\r\n    :model=\"ruleForm\"\r\n    :rules=\"rules\"\r\n    ref=\"ruleForm\"\r\n    label-width=\"80px\"\r\n    class=\"demo-ruleForm\"\r\n  >\r\n    <el-form-item label=\"用户名\" prop=\"username\">\r\n      <el-input\r\n        prefix-icon=\"el-icon-user-solid\"\r\n        v-model=\"ruleForm.username\"\r\n      ></el-input>\r\n    </el-form-item>\r\n\r\n    \r\n    <el-form-item label=\"邮箱\" prop=\"email\">\r\n        <el-input\r\n        prefix-icon=\"el-icon-message\"\r\n        v-model=\"ruleForm.email\"\r\n      ></el-input>\r\n    </el-form-item>\r\n\r\n    <el-form-item label=\"密码\" prop=\"password\" >\r\n      <el-input type=\"password\"\r\n        prefix-icon=\"el-icon-lock\"\r\n        v-model=\"ruleForm.password\"\r\n      ></el-input>\r\n    </el-form-item>\r\n    <el-form-item label=\"重复密码\" prop=\"repeatPassword\" >\r\n      <el-input type=\"password\"\r\n        prefix-icon=\"el-icon-lock\"\r\n        v-model=\"ruleForm.repeatPassword\"\r\n      ></el-input>\r\n    </el-form-item>\r\n\r\n    <el-form-item>\r\n      <el-row type=\"flex\" class=\"row-bg\" justify=\"space-between\">\r\n        <el-col :span=\"11\">\r\n          <el-button\r\n            type=\"primary\"\r\n            @click=\"submitForm('ruleForm')\"\r\n            style=\"width: 100%\"\r\n            >注&nbsp;&nbsp;册</el-button\r\n          >\r\n        </el-col>\r\n        <el-col :span=\"11\">\r\n          <el-button @click=\"resetForm('ruleForm')\" style=\"width: 100%\"\r\n            >重&nbsp;&nbsp;置</el-button\r\n          >\r\n        </el-col>\r\n      </el-row>\r\n    </el-form-item>\r\n  </el-form>\r\n</template>\r\n\r\n<script>\r\nimport request from '@/utils/request'\r\nexport default {\r\n  name: \"RegisterComponent\",\r\n  data() {\r\n    var checkPass1 = (rule, value, callback) => {\r\n        if (value === '') {\r\n          callback(new Error('请输入密码'));\r\n        } else {\r\n          if (this.ruleForm.checkPass !== '') {\r\n            this.$refs.ruleForm.validateField('repeatPassword');\r\n          }\r\n          callback();\r\n        }\r\n      };  \r\n    var checkPass2 = (rule, value, callback) => {\r\n        if (value === '') {\r\n            callback(new Error('请再次输入密码'));\r\n        } else if (value !== this.ruleForm.password) {\r\n            callback(new Error('两次输入密码不一致!'));\r\n        } else {\r\n            callback();\r\n        }\r\n    };\r\n    var checkUsr = (rule, value, callback) => {       \r\n        if (value === '') {\r\n            callback(new Error('请输入用户名'));\r\n        } else {\r\n            request.get('user/checkUser?username='+value, {username: value}).then((response) => {\r\n               console.log(response.data.data);\r\n               if (response.data.data==true) callback(new Error('用户名已存在!'));\r\n               else callback();\r\n            })         \r\n        }\r\n    };\r\n    return {\r\n      ruleForm: {\r\n        username: \"\",\r\n        password: \"\",\r\n        email: \"\",\r\n        repeatPassword: \"\"\r\n      },\r\n      rules: {\r\n        username: [\r\n          { validator: checkUsr, trigger: \"blur\" }\r\n        ],\r\n        password: [           \r\n            { validator: checkPass1, trigger: \"blur\" }\r\n        ],      \r\n        email: [\r\n            { type: 'email', message: '请输入正确的邮箱地址', trigger: ['blur', 'change'] }\r\n        ],\r\n        repeatPassword: [          \r\n            { validator: checkPass2, trigger: \"blur\" }\r\n        ]\r\n      },\r\n    };   \r\n  },\r\n  methods: {\r\n    submitForm(formName) {\r\n      this.$refs[formName].validate((valid) => {\r\n        if (valid) {\r\n          request.post('users/register', this.ruleForm).then((response) => {\r\n              console.log(response)\r\n              this.$message({\r\n                message: '注册成功,请登录',\r\n                type: 'success'\r\n              });\r\n              this.$emit('change-tab')\r\n            }).catch((error) => {\r\n              console.log(error)\r\n              console.log(error.response.data['username'][0])\r\n              console.log(error.response.data['password'][0])\r\n            })\r\n        } else {\r\n          console.log(\"error submit!!\");\r\n          return false;\r\n        }\r\n      });\r\n    },\r\n    resetForm(formName) {\r\n      this.$refs[formName].resetFields();\r\n    },\r\n    \r\n  },\r\n};\r\n</script>"]}]}