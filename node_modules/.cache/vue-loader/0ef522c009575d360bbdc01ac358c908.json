{"remainingRequest":"D:\\IdeaProjects\\SchoolProject\\dp_font\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\IdeaProjects\\SchoolProject\\dp_font\\src\\components\\WarningInfo.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\IdeaProjects\\SchoolProject\\dp_font\\src\\components\\WarningInfo.vue","mtime":1654813742093},{"path":"D:\\IdeaProjects\\SchoolProject\\dp_font\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\IdeaProjects\\SchoolProject\\dp_font\\node_modules\\babel-loader\\lib\\index.js","mtime":315532800000},{"path":"D:\\IdeaProjects\\SchoolProject\\dp_font\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\IdeaProjects\\SchoolProject\\dp_font\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KDQppbXBvcnQgcmVxdWVzdCBmcm9tICJAL3V0aWxzL3JlcXVlc3QiOw0KDQpleHBvcnQgZGVmYXVsdCB7DQogIGRhdGEoKSB7DQoNCiAgICByZXR1cm4gew0KICAgICAgdGFibGVEYXRhOiBbXSwNCiAgICAgIG11bHRpcGxlU2VsZWN0aW9uOiBbXSwNCiAgICAgIHRvdGFsOiAwLA0KICAgICAgcGFnZVNpemU6IDksDQogICAgICBjdXJyZW50UGFnZTogMSwNCiAgICAgIGRpYWxvZ1RhYmxlVmlzaWJsZTogZmFsc2UsDQogICAgICBoaWRlUGFnZTogdHJ1ZSwNCiAgICAgIGxhYmVsUG9zaXRpb246ICJyaWdodCIsDQogICAgICBkYXRhRm9ybTogew0KICAgICAgICBjb25lSWQ6IiIsDQogICAgICAgIGNvbmVOYW1lOiAiIiwNCg0KICAgICAgICB1c2VyRmxhZzoiIiwNCiAgICAgICAgdGFiOiAiIiwNCiAgICAgICAgcHVibGljVHlwZTogIiIsDQogICAgICAgIHBlcm1pc3Npb246IFtdLA0KICAgICAgfSwNCiAgICAgIGZpbGVMaXN0OiBbXSwNCg0KICAgICAgcnVsZXM6IHsNCiAgICAgICAgbmFtZTogWw0KICAgICAgICAgIHsgcmVxdWlyZWQ6IHRydWUsIG1lc3NhZ2U6ICLor7fovpPlhaXmlbDmja7pm4blkI3np7AiLCB0cmlnZ2VyOiAiYmx1ciIgfSwNCiAgICAgICAgXSwNCiAgICAgICAgZGV0YWlsOiBbDQogICAgICAgICAgeyByZXF1aXJlZDogdHJ1ZSwgbWVzc2FnZTogIuivt+i+k+WFpeaVsOaNrumbhuivpue7huS/oeaBryIsIHRyaWdnZXI6ICJibHVyIiB9LA0KICAgICAgICBdLA0KICAgICAgICB0YWI6IFt7IHJlcXVpcmVkOiB0cnVlLCBtZXNzYWdlOiAi6K+36L6T5YWl5pWw5o2u6ZuG5qCH562+IiwgdHJpZ2dlcjogImJsdXIiIH1dLA0KICAgICAgICBwdWJsaWNUeXBlOiBbDQogICAgICAgICAgeyByZXF1aXJlZDogdHJ1ZSwgbWVzc2FnZTogIuivt+mAieaLqeWFrOW8gOexu+WeiyIsIHRyaWdnZXI6ICJibHVyIiB9LA0KICAgICAgICBdLA0KICAgICAgICBwZXJtaXNzaW9uOiBbDQogICAgICAgICAgeyByZXF1aXJlZDogdHJ1ZSwgbWVzc2FnZTogIuivt+mAieiHs+WwkeS4gOS4quadg+mZkCIsIHRyaWdnZXI6ICJibHVyIiB9LA0KICAgICAgICBdLA0KICAgICAgfSwNCiAgICB9Ow0KICB9LA0KDQogIG1ldGhvZHM6IHsNCiAgICBkb3dubG9hZEZpbGUoaW5kZXgsIHJvdykgew0KICAgICAgd2luZG93LmxvY2F0aW9uLmhyZWYgPSByb3cuZGF0YVNldDsNCiAgICB9LA0KICAgIGhhbmRsZURlbGV0ZShpbmRleCwgcm93KSB7DQogICAgICByZXF1ZXN0DQogICAgICAgIC5kZWxldGUoIi9hcGkvZGF0YS8iICsgcm93LmlkKQ0KICAgICAgICAudGhlbigoKSA9PiB7DQogICAgICAgICAgdGhpcy4kbWVzc2FnZSh7DQogICAgICAgICAgICBtZXNzYWdlOiAi5Yig6Zmk5oiQ5YqfIiwNCiAgICAgICAgICAgIHR5cGU6ICJzdWNjZXNzIiwNCiAgICAgICAgICB9KTsNCiAgICAgICAgICB0aGlzLkN1cnJlbnRDaGFuZ2UodGhpcy5jdXJyZW50UGFnZSk7DQogICAgICAgIH0pDQogICAgICAgIC5jYXRjaCgoZXJyb3IpID0+IHsNCiAgICAgICAgICBjb25zb2xlLmxvZyhlcnJvcik7DQogICAgICAgICAgdGhpcy4kbWVzc2FnZSh7DQogICAgICAgICAgICBtZXNzYWdlOiAi5Yig6Zmk5aSx6LSlIiwNCiAgICAgICAgICAgIHR5cGU6ICJlcnJvciIsDQogICAgICAgICAgfSk7DQogICAgICAgIH0pOw0KICAgIH0sDQogICAgIGZvcm1hdEJvb2xlYW4ocm93LCBjb2x1bW4sIGNlbGxWYWx1ZSkgew0KICAgICAgIGxldCB2YWx1ZTsNCiAgICAgICBzd2l0Y2goY2VsbFZhbHVlKXsNCiAgICAgICAgIGNhc2UgMSA6IHZhbHVlID0gIumUpeahtui3jOWAkiI7IGJyZWFrOw0KICAgICAgICAgY2FzZSAyOiB2YWx1ZSA9ICLlvILluLjnorDmkp4iO2JyZWFrOw0KICAgICAgICAgZGVmYXVsdDp2YWx1ZSA9ICLkuqTpgJrkuovmlYUiO2JyZWFrOw0KICAgICAgIH0NCiAgICAgcmV0dXJuIHZhbHVlOw0KICAgIH0sDQogICAgZm9ybWF0c2NyYXBGbGFnKHJvdywgY29sdW1uLCBjZWxsVmFsdWUpIHsNCiAgICAgICBsZXQgdmFsdWU7DQogICAgICAgc3dpdGNoKGNlbGxWYWx1ZSl7DQogICAgICAgICBjYXNlIDAgOiB2YWx1ZSA9ICLlsJrmnKrlpITnkIYiOyBicmVhazsNCiAgICAgICAgIGNhc2UgMTogdmFsdWUgPSAi5bey5aSE55CGIjticmVhazsNCiAgICAgICAgIGRlZmF1bHQ6dmFsdWUgPSAi5b6F56Gu6K6kIjticmVhazsNCiAgICAgICB9DQogICAgICByZXR1cm4gdmFsdWU7DQogICAgIH0sDQoNCg0KICAgIEN1cnJlbnRDaGFuZ2UocGFnZSkgew0KICAgICAgdGhpcy5jdXJyZW50UGFnZSA9IHBhZ2U7DQogICAgICByZXF1ZXN0DQogICAgICAgIC5nZXQoImFwaS9kYXRhP3BhZ2U9IiArIHBhZ2UgKyAiJnNpemU9IiArIHRoaXMucGFnZVNpemUpDQogICAgICAgIC50aGVuKChyZXNwb25zZSkgPT4gew0KICAgICAgICAgIHRoaXMudGFibGVEYXRhID0gcmVzcG9uc2UuZGF0YS5yZXN1bHRzOw0KICAgICAgICAgIHRoaXMudG90YWwgPSByZXNwb25zZS5kYXRhLmNvdW50Ow0KICAgICAgICB9KTsNCiAgICB9LA0KICAgIGhhbmRsZUVkaXQoaW5kZXgsIHJvdykgew0KICAgICAgdGhpcy5kaWFsb2dUYWJsZVZpc2libGUgPSB0cnVlOw0KICAgICAgdGhpcy5maWxlTGlzdCA9IFsNCiAgICAgICAgeyBuYW1lOiByb3cuZGF0YVNldC5zcGxpdCgiLyIpLnBvcCgpLCB1cmw6IHJvdy5kYXRhU2V0IH0sDQogICAgICBdOw0KICAgICAgdGhpcy5kYXRhRm9ybS5pZCA9IHJvdy5pZDsNCiAgICAgIHRoaXMuZGF0YUZvcm0ubmFtZSA9IHJvdy5uYW1lOw0KICAgICAgdGhpcy5kYXRhRm9ybS5kZXRhaWwgPSByb3cuZGV0YWlsOw0KICAgICAgdGhpcy5kYXRhRm9ybS50YWIgPSByb3cudGFiOw0KICAgICAgbGV0IHB1YmxpY1R5cGUgPSBbIuengeacieexu+WeiyIsICLlkIznu4TmiJDlkZgiLCAi5YWs5byAIl07DQogICAgICBsZXQgcGVybWlzc2lvbiA9IFsi6K+m57uG5L+h5oGvIiwgIuiBmuWQiOafpeivoiIsICLnm7Tmlrnlm77lj5HluIMiXTsNCiAgICAgIGxldCByb3dQZXJtaXNzaW9uQXJyID0gcm93LnBlcm1pc3Npb24uc3BsaXQoIiwgIik7DQogICAgICBsZXQgYXJyID0gW107DQogICAgICBmb3IgKGxldCBpdGVtIGluIHJvd1Blcm1pc3Npb25BcnIpIHsNCiAgICAgICAgYXJyLnB1c2goU3RyaW5nKHBlcm1pc3Npb24uaW5kZXhPZihyb3dQZXJtaXNzaW9uQXJyW2l0ZW1dKSkpOw0KICAgICAgfQ0KICAgICAgdGhpcy5kYXRhRm9ybS5wZXJtaXNzaW9uID0gYXJyOw0KICAgICAgdGhpcy5kYXRhRm9ybS5wdWJsaWNUeXBlID0gU3RyaW5nKHB1YmxpY1R5cGUuaW5kZXhPZihyb3cucHVibGljVHlwZSkpOw0KICAgIH0sDQogICAgYmVmb3JlUmVtb3ZlKGZpbGUpIHsNCiAgICAgIHJldHVybiB0aGlzLiRjb25maXJtKGDnoa7lrprnp7vpmaQgJHtmaWxlLm5hbWV977yfYCk7DQogICAgfSwNCiAgICBoYW5kbGVSZW1vdmUoKSB7DQogICAgICB0aGlzLmRhdGFGb3JtLmRhdGFTZXQgPSBudWxsOw0KICAgIH0sDQogICAgaGFuZGxlRXhjZWVkKCkgew0KICAgICAgdGhpcy4kbWVzc2FnZS53YXJuaW5nKGDlj6rog73pgInmi6nkuIDkuKrmlofku7ZgKTsNCiAgICB9LA0KICAgIGhhbmRsZUNoYW5nZShmaWxlLCBmaWxlTGlzdCkgew0KICAgICAgdGhpcy5maWxlTGlzdCA9IGZpbGVMaXN0Ow0KICAgICAgdGhpcy5kYXRhRm9ybS5kYXRhU2V0ID0gZmlsZS5yYXc7DQogICAgfSwNCiAgICByZXNldEZvcm0oZm9ybU5hbWUpIHsNCiAgICAgIHRoaXMuJHJlZnNbZm9ybU5hbWVdLnJlc2V0RmllbGRzKCk7DQogICAgfSwNCiAgICBvblN1Ym1pdChmb3JtTmFtZSkgew0KICAgICAgdGhpcy4kcmVmc1tmb3JtTmFtZV0udmFsaWRhdGUoKHZhbGlkKSA9PiB7DQogICAgICAgIGlmICh2YWxpZCkgew0KICAgICAgICAgIGxldCBmb3JtRGF0YSA9IG5ldyBGb3JtRGF0YSgpOw0KICAgICAgICAgIGZvciAobGV0IGtleSBpbiB0aGlzLmRhdGFGb3JtKSB7DQogICAgICAgICAgICBpZiAoa2V5ID09PSAicGVybWlzc2lvbiIgJiYgdGhpcy5kYXRhRm9ybVtrZXldLmxlbmd0aCAhPSAxKSB7DQogICAgICAgICAgICAgIGZvciAobGV0IGl0ZW0gaW4gdGhpcy5kYXRhRm9ybVtrZXldKSB7DQogICAgICAgICAgICAgICAgZm9ybURhdGEuYXBwZW5kKGtleSwgaXRlbSk7DQogICAgICAgICAgICAgIH0NCiAgICAgICAgICAgIH0gZWxzZSB7DQogICAgICAgICAgICAgIGZvcm1EYXRhLmFwcGVuZChrZXksIHRoaXMuZGF0YUZvcm1ba2V5XSk7DQogICAgICAgICAgICB9DQogICAgICAgICAgfQ0KICAgICAgICAgIHJlcXVlc3QNCiAgICAgICAgICAgIC5wYXRjaCgiL2FwaS9kYXRhLyIgKyB0aGlzLmRhdGFGb3JtLmlkICsgIi8iLCBmb3JtRGF0YSkNCiAgICAgICAgICAgIC50aGVuKChyZXNwb25zZSkgPT4gew0KICAgICAgICAgICAgICBjb25zb2xlLmxvZyhyZXNwb25zZSk7DQogICAgICAgICAgICAgIHRoaXMuJG1lc3NhZ2Uoew0KICAgICAgICAgICAgICAgIG1lc3NhZ2U6ICLkv67mlLnmiJDlip8iLA0KICAgICAgICAgICAgICAgIHR5cGU6ICJzdWNjZXNzIiwNCiAgICAgICAgICAgICAgfSk7DQogICAgICAgICAgICB9KQ0KICAgICAgICAgICAgLmNhdGNoKChlcnIpID0+IHsNCiAgICAgICAgICAgICAgbGV0IGVyck1zZyA9IGVyci5yZXNwb25zZS5kYXRhOw0KICAgICAgICAgICAgICBsZXQgZXJyTXNncyA9ICIiOw0KICAgICAgICAgICAgICBmb3IgKGxldCBrZXkgaW4gZXJyTXNnKSB7DQogICAgICAgICAgICAgICAgZXJyTXNncyArPSBlcnJNc2dba2V5XTsNCiAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICB0aGlzLiRtZXNzYWdlKHsNCiAgICAgICAgICAgICAgICBtZXNzYWdlOiBlcnJNc2dzLA0KICAgICAgICAgICAgICAgIHR5cGU6ICJlcnJvciIsDQogICAgICAgICAgICAgIH0pOw0KICAgICAgICAgICAgICBjb25zb2xlLmxvZyhlcnIucmVzcG9uc2UuZGF0YSk7DQogICAgICAgICAgICB9KTsNCiAgICAgICAgfSBlbHNlIHsNCiAgICAgICAgICBjb25zb2xlLmxvZygiZXJyb3Igc3VibWl0ISEiKTsNCiAgICAgICAgICByZXR1cm4gZmFsc2U7DQogICAgICAgIH0NCiAgICAgIH0pOw0KICAgIH0sDQoNCiAgfSwNCiAgbW91bnRlZCgpIHsNCiAgICByZXF1ZXN0DQogICAgICAuZ2V0KCJjb25lcy9nZXRDb25lc0xpc3QiKQ0KICAgICAgLnRoZW4oKHJlc3BvbnNlKSA9PiB7DQogICAgICAgIHRoaXMudGFibGVEYXRhID0gcmVzcG9uc2UuZGF0YS5kYXRhOw0KICAgICAgICB0aGlzLnRvdGFsID0gcmVzcG9uc2UuZGF0YS5jb3VudDsNCiAgICAgIH0pDQogICAgICAuY2F0Y2goKGVycm9yKSA9PiB7DQogICAgICAgIGNvbnNvbGUubG9nKGVycm9yKTsNCiAgICAgIH0pOw0KICB9LA0KfTsNCg=="},{"version":3,"sources":["WarningInfo.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAyIA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"WarningInfo.vue","sourceRoot":"src/components","sourcesContent":["<template>\r\n  <div>\r\n    <el-table\r\n      ref=\"multipleTable\"\r\n      :data=\"tableData\"\r\n      tooltip-effect=\"dark\"\r\n      style=\"width: 100%\"\r\n    >\r\n      <el-table-column prop=\"coneId\" label=\"信息编号\" width=\"130\"> </el-table-column>\r\n      <el-table-column prop=\"coneName\" label=\"锥桶编号\" width=\"120\"> </el-table-column>\r\n      <el-table-column\r\n        prop=\"userFlag\"\r\n        \r\n        label=\"预警消息类别\"\r\n        width=\"120\"\r\n        show-overflow-tooltip\r\n        :formatter=\"formatBoolean\"\r\n      ></el-table-column>\r\n      <el-table-column prop=\"location\" label=\"发生位置\" width=\"160\">\r\n      </el-table-column>\r\n      <el-table-column prop=\"batteryLeft\" :formatter=\"formatscrapFlag\" label=\"当前状态\" width=\"80\">\r\n      </el-table-column>\r\n      \r\n      <el-table-column label=\"操作\">\r\n        <template slot-scope=\"scope\">\r\n          <!--<el-button\r\n            size=\"mini\"\r\n            type=\"primary\"\r\n            @click=\"handleEdit(scope.$index, scope.row)\"\r\n            ><i class=\"el-icon-edit\"></i>处理</el-button\r\n          >-->\r\n          <el-button\r\n            size=\"mini\"\r\n            type=\"danger\"\r\n            @click=\"handleDelete(scope.$index, scope.row)\"\r\n            ><i class=\"el-icon-delete\"></i>删除</el-button\r\n          >\r\n          <!--<el-button\r\n            size=\"mini\"\r\n            type=\"success\"\r\n            @click=\"downloadFile(scope.$index, scope.row)\"\r\n            ><i class=\"el-icon-view\"></i>详细信息查看</el-button\r\n          >-->\r\n          \r\n        </template>\r\n      </el-table-column>\r\n    </el-table>\r\n    <div class=\"block\">\r\n      <el-pagination\r\n        layout=\"prev, pager, next\"\r\n        :page-size=\"pageSize\"\r\n        :total=\"total\"\r\n        :current-page.sync=\"currentPage\"\r\n        @current-change=\"CurrentChange\"\r\n        :hide-on-single-page=\"hidePage\"\r\n        style=\"text-align: right\"\r\n      >\r\n      </el-pagination>\r\n    </div>\r\n    <el-dialog title=\"修改数据信息\" :visible.sync=\"dialogTableVisible\">\r\n      <div style=\"width: 90%; margin-left: auto; margin-right: auto\">\r\n        <div style=\"text-align: center\">\r\n          <span style=\"font-size: 20px\">修改数据集</span>\r\n        </div>\r\n        <el-row style=\"margin-top: 25px\">\r\n          <el-col :span=\"24\">\r\n            <el-form\r\n              :label-position=\"labelPosition\"\r\n              label-width=\"120px\"\r\n              :model=\"dataForm\"\r\n              :rules=\"rules\"\r\n              ref=\"dataForm\"\r\n            >\r\n              <el-form-item label=\"数据集名称\" prop=\"name\">\r\n                <el-input v-model=\"dataForm.name\"></el-input>\r\n              </el-form-item>\r\n              <el-form-item label=\"数据集详细信息\" prop=\"detail\">\r\n                <el-input type=\"textarea\" v-model=\"dataForm.detail\"></el-input>\r\n              </el-form-item>\r\n              <el-form-item label=\"数据集标签\" prop=\"tab\">\r\n                <el-input v-model=\"dataForm.tab\"></el-input>\r\n              </el-form-item>\r\n              <el-form-item label=\"数据集公开类型\" prop=\"publicType\">\r\n                <el-radio-group v-model=\"dataForm.publicType\">\r\n                  <el-radio label=\"0\" name=\"publicType\">私有类型</el-radio>\r\n                  <el-radio label=\"1\" name=\"publicType\">同组成员</el-radio>\r\n                  <el-radio label=\"2\" name=\"publicType\">公开</el-radio>\r\n                </el-radio-group>\r\n              </el-form-item>\r\n              <el-form-item label=\"权限设置\" prop=\"permission\">\r\n                <el-checkbox-group v-model=\"dataForm.permission\">\r\n                  <el-checkbox label=\"0\" name=\"permission\"\r\n                    >详细信息</el-checkbox\r\n                  >\r\n                  <el-checkbox label=\"1\" name=\"permission\"\r\n                    >聚合查询</el-checkbox\r\n                  >\r\n                  <el-checkbox label=\"2\" name=\"permission\"\r\n                    >直方图发布</el-checkbox\r\n                  >\r\n                </el-checkbox-group>\r\n              </el-form-item>\r\n              <el-form-item label=\"上传文件\" prop=\"dataSet\" style=\"height: 50%\">\r\n                <el-upload\r\n                  accept=\".csv\"\r\n                  action=\"\"\r\n                  :before-remove=\"beforeRemove\"\r\n                  :on-remove=\"handleRemove\"\r\n                  :on-change=\"handleChange\"\r\n                  multiple\r\n                  :limit=\"1\"\r\n                  :on-exceed=\"handleExceed\"\r\n                  :file-list=\"fileList\"\r\n                  :auto-upload=\"false\"\r\n                >\r\n                  <el-button size=\"small\" type=\"success\"\r\n                    ><i class=\"el-icon-upload el-icon--right\"></i\r\n                    >&nbsp;点击上传</el-button\r\n                  >\r\n                  <div slot=\"tip\" class=\"el-upload__tip\">只能上传csv文件</div>\r\n                </el-upload>\r\n              </el-form-item>\r\n              <el-form-item>\r\n                <el-button type=\"primary\" @click=\"onSubmit('dataForm')\"\r\n                  >修改</el-button\r\n                >\r\n                <el-button @click=\"resetForm('dataForm')\">重置</el-button>\r\n              </el-form-item>\r\n            </el-form>\r\n          </el-col>\r\n        </el-row>\r\n      </div>\r\n    </el-dialog>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport request from \"@/utils/request\";\r\n\r\nexport default {\r\n  data() {\r\n\r\n    return {\r\n      tableData: [],\r\n      multipleSelection: [],\r\n      total: 0,\r\n      pageSize: 9,\r\n      currentPage: 1,\r\n      dialogTableVisible: false,\r\n      hidePage: true,\r\n      labelPosition: \"right\",\r\n      dataForm: {\r\n        coneId:\"\",\r\n        coneName: \"\",\r\n\r\n        userFlag:\"\",\r\n        tab: \"\",\r\n        publicType: \"\",\r\n        permission: [],\r\n      },\r\n      fileList: [],\r\n\r\n      rules: {\r\n        name: [\r\n          { required: true, message: \"请输入数据集名称\", trigger: \"blur\" },\r\n        ],\r\n        detail: [\r\n          { required: true, message: \"请输入数据集详细信息\", trigger: \"blur\" },\r\n        ],\r\n        tab: [{ required: true, message: \"请输入数据集标签\", trigger: \"blur\" }],\r\n        publicType: [\r\n          { required: true, message: \"请选择公开类型\", trigger: \"blur\" },\r\n        ],\r\n        permission: [\r\n          { required: true, message: \"请选至少一个权限\", trigger: \"blur\" },\r\n        ],\r\n      },\r\n    };\r\n  },\r\n\r\n  methods: {\r\n    downloadFile(index, row) {\r\n      window.location.href = row.dataSet;\r\n    },\r\n    handleDelete(index, row) {\r\n      request\r\n        .delete(\"/api/data/\" + row.id)\r\n        .then(() => {\r\n          this.$message({\r\n            message: \"删除成功\",\r\n            type: \"success\",\r\n          });\r\n          this.CurrentChange(this.currentPage);\r\n        })\r\n        .catch((error) => {\r\n          console.log(error);\r\n          this.$message({\r\n            message: \"删除失败\",\r\n            type: \"error\",\r\n          });\r\n        });\r\n    },\r\n     formatBoolean(row, column, cellValue) {\r\n       let value;\r\n       switch(cellValue){\r\n         case 1 : value = \"锥桶跌倒\"; break;\r\n         case 2: value = \"异常碰撞\";break;\r\n         default:value = \"交通事故\";break;\r\n       }\r\n     return value;\r\n    },\r\n    formatscrapFlag(row, column, cellValue) {\r\n       let value;\r\n       switch(cellValue){\r\n         case 0 : value = \"尚未处理\"; break;\r\n         case 1: value = \"已处理\";break;\r\n         default:value = \"待确认\";break;\r\n       }\r\n      return value;\r\n     },\r\n\r\n\r\n    CurrentChange(page) {\r\n      this.currentPage = page;\r\n      request\r\n        .get(\"api/data?page=\" + page + \"&size=\" + this.pageSize)\r\n        .then((response) => {\r\n          this.tableData = response.data.results;\r\n          this.total = response.data.count;\r\n        });\r\n    },\r\n    handleEdit(index, row) {\r\n      this.dialogTableVisible = true;\r\n      this.fileList = [\r\n        { name: row.dataSet.split(\"/\").pop(), url: row.dataSet },\r\n      ];\r\n      this.dataForm.id = row.id;\r\n      this.dataForm.name = row.name;\r\n      this.dataForm.detail = row.detail;\r\n      this.dataForm.tab = row.tab;\r\n      let publicType = [\"私有类型\", \"同组成员\", \"公开\"];\r\n      let permission = [\"详细信息\", \"聚合查询\", \"直方图发布\"];\r\n      let rowPermissionArr = row.permission.split(\", \");\r\n      let arr = [];\r\n      for (let item in rowPermissionArr) {\r\n        arr.push(String(permission.indexOf(rowPermissionArr[item])));\r\n      }\r\n      this.dataForm.permission = arr;\r\n      this.dataForm.publicType = String(publicType.indexOf(row.publicType));\r\n    },\r\n    beforeRemove(file) {\r\n      return this.$confirm(`确定移除 ${file.name}？`);\r\n    },\r\n    handleRemove() {\r\n      this.dataForm.dataSet = null;\r\n    },\r\n    handleExceed() {\r\n      this.$message.warning(`只能选择一个文件`);\r\n    },\r\n    handleChange(file, fileList) {\r\n      this.fileList = fileList;\r\n      this.dataForm.dataSet = file.raw;\r\n    },\r\n    resetForm(formName) {\r\n      this.$refs[formName].resetFields();\r\n    },\r\n    onSubmit(formName) {\r\n      this.$refs[formName].validate((valid) => {\r\n        if (valid) {\r\n          let formData = new FormData();\r\n          for (let key in this.dataForm) {\r\n            if (key === \"permission\" && this.dataForm[key].length != 1) {\r\n              for (let item in this.dataForm[key]) {\r\n                formData.append(key, item);\r\n              }\r\n            } else {\r\n              formData.append(key, this.dataForm[key]);\r\n            }\r\n          }\r\n          request\r\n            .patch(\"/api/data/\" + this.dataForm.id + \"/\", formData)\r\n            .then((response) => {\r\n              console.log(response);\r\n              this.$message({\r\n                message: \"修改成功\",\r\n                type: \"success\",\r\n              });\r\n            })\r\n            .catch((err) => {\r\n              let errMsg = err.response.data;\r\n              let errMsgs = \"\";\r\n              for (let key in errMsg) {\r\n                errMsgs += errMsg[key];\r\n              }\r\n              this.$message({\r\n                message: errMsgs,\r\n                type: \"error\",\r\n              });\r\n              console.log(err.response.data);\r\n            });\r\n        } else {\r\n          console.log(\"error submit!!\");\r\n          return false;\r\n        }\r\n      });\r\n    },\r\n\r\n  },\r\n  mounted() {\r\n    request\r\n      .get(\"cones/getConesList\")\r\n      .then((response) => {\r\n        this.tableData = response.data.data;\r\n        this.total = response.data.count;\r\n      })\r\n      .catch((error) => {\r\n        console.log(error);\r\n      });\r\n  },\r\n};\r\n</script>"]}]}