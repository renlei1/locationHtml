{"remainingRequest":"E:\\WorkSpace\\SchoolWorkSpace\\dp_font\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!E:\\WorkSpace\\SchoolWorkSpace\\dp_font\\src\\components\\ConeList.vue?vue&type=script&lang=js&","dependencies":[{"path":"E:\\WorkSpace\\SchoolWorkSpace\\dp_font\\src\\components\\ConeList.vue","mtime":1610587687610},{"path":"E:\\WorkSpace\\SchoolWorkSpace\\dp_font\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"E:\\WorkSpace\\SchoolWorkSpace\\dp_font\\node_modules\\babel-loader\\lib\\index.js","mtime":315532800000},{"path":"E:\\WorkSpace\\SchoolWorkSpace\\dp_font\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"E:\\WorkSpace\\SchoolWorkSpace\\dp_font\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KDQppbXBvcnQgcmVxdWVzdCBmcm9tICJAL3V0aWxzL3JlcXVlc3QiOw0KDQpleHBvcnQgZGVmYXVsdCB7DQogIGRhdGEoKSB7DQoNCiAgICByZXR1cm4gew0KICAgICAgdGFibGVEYXRhOiBbXSwNCiAgICAgIG11bHRpcGxlU2VsZWN0aW9uOiBbXSwNCiAgICAgIHRvdGFsOiAwLA0KICAgICAgcGFnZVNpemU6IDksDQogICAgICBjdXJyZW50UGFnZTogMSwNCiAgICAgIGRpYWxvZ1RhYmxlVmlzaWJsZTogZmFsc2UsDQogICAgICBoaWRlUGFnZTogdHJ1ZSwNCiAgICAgIGxhYmVsUG9zaXRpb246ICJyaWdodCIsDQogICAgICBkYXRhRm9ybTogew0KICAgICAgICBjb25lSWQ6IiIsDQogICAgICAgIGNvbmVOYW1lOiAiIiwNCg0KICAgICAgICB1c2VyRmxhZzoiIiwNCiAgICAgICAgdGFiOiAiIiwNCiAgICAgICAgcHVibGljVHlwZTogIiIsDQogICAgICAgIHBlcm1pc3Npb246IFtdLA0KICAgICAgfSwNCiAgICAgIGZpbGVMaXN0OiBbXSwNCg0KICAgICAgcnVsZXM6IHsNCiAgICAgICAgbmFtZTogWw0KICAgICAgICAgIHsgcmVxdWlyZWQ6IHRydWUsIG1lc3NhZ2U6ICLor7fovpPlhaXmlbDmja7pm4blkI3np7AiLCB0cmlnZ2VyOiAiYmx1ciIgfSwNCiAgICAgICAgXSwNCiAgICAgICAgZGV0YWlsOiBbDQogICAgICAgICAgeyByZXF1aXJlZDogdHJ1ZSwgbWVzc2FnZTogIuivt+i+k+WFpeaVsOaNrumbhuivpue7huS/oeaBryIsIHRyaWdnZXI6ICJibHVyIiB9LA0KICAgICAgICBdLA0KICAgICAgICB0YWI6IFt7IHJlcXVpcmVkOiB0cnVlLCBtZXNzYWdlOiAi6K+36L6T5YWl5pWw5o2u6ZuG5qCH562+IiwgdHJpZ2dlcjogImJsdXIiIH1dLA0KICAgICAgICBwdWJsaWNUeXBlOiBbDQogICAgICAgICAgeyByZXF1aXJlZDogdHJ1ZSwgbWVzc2FnZTogIuivt+mAieaLqeWFrOW8gOexu+WeiyIsIHRyaWdnZXI6ICJibHVyIiB9LA0KICAgICAgICBdLA0KICAgICAgICBwZXJtaXNzaW9uOiBbDQogICAgICAgICAgeyByZXF1aXJlZDogdHJ1ZSwgbWVzc2FnZTogIuivt+mAieiHs+WwkeS4gOS4quadg+mZkCIsIHRyaWdnZXI6ICJibHVyIiB9LA0KICAgICAgICBdLA0KICAgICAgfSwNCiAgICB9Ow0KICB9LA0KDQogIG1ldGhvZHM6IHsNCiAgICBkb3dubG9hZEZpbGUoaW5kZXgsIHJvdykgew0KICAgICAgd2luZG93LmxvY2F0aW9uLmhyZWYgPSByb3cuZGF0YVNldDsNCiAgICB9LA0KICAgIGhhbmRsZURlbGV0ZShpbmRleCwgcm93KSB7DQogICAgICByZXF1ZXN0DQogICAgICAgIC5kZWxldGUoIi9hcGkvZGF0YS8iICsgcm93LmlkKQ0KICAgICAgICAudGhlbigoKSA9PiB7DQogICAgICAgICAgdGhpcy4kbWVzc2FnZSh7DQogICAgICAgICAgICBtZXNzYWdlOiAi5Yig6Zmk5oiQ5YqfIiwNCiAgICAgICAgICAgIHR5cGU6ICJzdWNjZXNzIiwNCiAgICAgICAgICB9KTsNCiAgICAgICAgICB0aGlzLkN1cnJlbnRDaGFuZ2UodGhpcy5jdXJyZW50UGFnZSk7DQogICAgICAgIH0pDQogICAgICAgIC5jYXRjaCgoZXJyb3IpID0+IHsNCiAgICAgICAgICBjb25zb2xlLmxvZyhlcnJvcik7DQogICAgICAgICAgdGhpcy4kbWVzc2FnZSh7DQogICAgICAgICAgICBtZXNzYWdlOiAi5Yig6Zmk5aSx6LSlIiwNCiAgICAgICAgICAgIHR5cGU6ICJlcnJvciIsDQogICAgICAgICAgfSk7DQogICAgICAgIH0pOw0KICAgIH0sDQogICAgIGZvcm1hdEJvb2xlYW4ocm93LCBjb2x1bW4sIGNlbGxWYWx1ZSkgew0KICAgICAgIGxldCB2YWx1ZTsNCiAgICAgICBzd2l0Y2goY2VsbFZhbHVlKXsNCiAgICAgICAgIGNhc2UgMSA6IHZhbHVlID0gIuWcqOmAlOS9v+eUqOS4rSI7IGJyZWFrOw0KICAgICAgICAgY2FzZSAyOiB2YWx1ZSA9ICLlupPlrZjkv53lrZjkuK0iO2JyZWFrOw0KICAgICAgICAgZGVmYXVsdDp2YWx1ZSA9ICLlupPlrZjkv53lrZjkuK0iO2JyZWFrOw0KICAgICAgIH0NCiAgICAgcmV0dXJuIHZhbHVlOw0KICAgIH0sDQogICAgQ3VycmVudENoYW5nZShwYWdlKSB7DQogICAgICB0aGlzLmN1cnJlbnRQYWdlID0gcGFnZTsNCiAgICAgIHJlcXVlc3QNCiAgICAgICAgLmdldCgiYXBpL2RhdGE/cGFnZT0iICsgcGFnZSArICImc2l6ZT0iICsgdGhpcy5wYWdlU2l6ZSkNCiAgICAgICAgLnRoZW4oKHJlc3BvbnNlKSA9PiB7DQogICAgICAgICAgdGhpcy50YWJsZURhdGEgPSByZXNwb25zZS5kYXRhLnJlc3VsdHM7DQogICAgICAgICAgdGhpcy50b3RhbCA9IHJlc3BvbnNlLmRhdGEuY291bnQ7DQogICAgICAgIH0pOw0KICAgIH0sDQogICAgaGFuZGxlRWRpdChpbmRleCwgcm93KSB7DQogICAgICB0aGlzLmRpYWxvZ1RhYmxlVmlzaWJsZSA9IHRydWU7DQogICAgICB0aGlzLmZpbGVMaXN0ID0gWw0KICAgICAgICB7IG5hbWU6IHJvdy5kYXRhU2V0LnNwbGl0KCIvIikucG9wKCksIHVybDogcm93LmRhdGFTZXQgfSwNCiAgICAgIF07DQogICAgICB0aGlzLmRhdGFGb3JtLmlkID0gcm93LmlkOw0KICAgICAgdGhpcy5kYXRhRm9ybS5uYW1lID0gcm93Lm5hbWU7DQogICAgICB0aGlzLmRhdGFGb3JtLmRldGFpbCA9IHJvdy5kZXRhaWw7DQogICAgICB0aGlzLmRhdGFGb3JtLnRhYiA9IHJvdy50YWI7DQogICAgICBsZXQgcHVibGljVHlwZSA9IFsi56eB5pyJ57G75Z6LIiwgIuWQjOe7hOaIkOWRmCIsICLlhazlvIAiXTsNCiAgICAgIGxldCBwZXJtaXNzaW9uID0gWyLor6bnu4bkv6Hmga8iLCAi6IGa5ZCI5p+l6K+iIiwgIuebtOaWueWbvuWPkeW4gyJdOw0KICAgICAgbGV0IHJvd1Blcm1pc3Npb25BcnIgPSByb3cucGVybWlzc2lvbi5zcGxpdCgiLCAiKTsNCiAgICAgIGxldCBhcnIgPSBbXTsNCiAgICAgIGZvciAobGV0IGl0ZW0gaW4gcm93UGVybWlzc2lvbkFycikgew0KICAgICAgICBhcnIucHVzaChTdHJpbmcocGVybWlzc2lvbi5pbmRleE9mKHJvd1Blcm1pc3Npb25BcnJbaXRlbV0pKSk7DQogICAgICB9DQogICAgICB0aGlzLmRhdGFGb3JtLnBlcm1pc3Npb24gPSBhcnI7DQogICAgICB0aGlzLmRhdGFGb3JtLnB1YmxpY1R5cGUgPSBTdHJpbmcocHVibGljVHlwZS5pbmRleE9mKHJvdy5wdWJsaWNUeXBlKSk7DQogICAgfSwNCiAgICBiZWZvcmVSZW1vdmUoZmlsZSkgew0KICAgICAgcmV0dXJuIHRoaXMuJGNvbmZpcm0oYOehruWumuenu+mZpCAke2ZpbGUubmFtZX3vvJ9gKTsNCiAgICB9LA0KICAgIGhhbmRsZVJlbW92ZSgpIHsNCiAgICAgIHRoaXMuZGF0YUZvcm0uZGF0YVNldCA9IG51bGw7DQogICAgfSwNCiAgICBoYW5kbGVFeGNlZWQoKSB7DQogICAgICB0aGlzLiRtZXNzYWdlLndhcm5pbmcoYOWPquiDvemAieaLqeS4gOS4quaWh+S7tmApOw0KICAgIH0sDQogICAgaGFuZGxlQ2hhbmdlKGZpbGUsIGZpbGVMaXN0KSB7DQogICAgICB0aGlzLmZpbGVMaXN0ID0gZmlsZUxpc3Q7DQogICAgICB0aGlzLmRhdGFGb3JtLmRhdGFTZXQgPSBmaWxlLnJhdzsNCiAgICB9LA0KICAgIHJlc2V0Rm9ybShmb3JtTmFtZSkgew0KICAgICAgdGhpcy4kcmVmc1tmb3JtTmFtZV0ucmVzZXRGaWVsZHMoKTsNCiAgICB9LA0KICAgIG9uU3VibWl0KGZvcm1OYW1lKSB7DQogICAgICB0aGlzLiRyZWZzW2Zvcm1OYW1lXS52YWxpZGF0ZSgodmFsaWQpID0+IHsNCiAgICAgICAgaWYgKHZhbGlkKSB7DQogICAgICAgICAgbGV0IGZvcm1EYXRhID0gbmV3IEZvcm1EYXRhKCk7DQogICAgICAgICAgZm9yIChsZXQga2V5IGluIHRoaXMuZGF0YUZvcm0pIHsNCiAgICAgICAgICAgIGlmIChrZXkgPT09ICJwZXJtaXNzaW9uIiAmJiB0aGlzLmRhdGFGb3JtW2tleV0ubGVuZ3RoICE9IDEpIHsNCiAgICAgICAgICAgICAgZm9yIChsZXQgaXRlbSBpbiB0aGlzLmRhdGFGb3JtW2tleV0pIHsNCiAgICAgICAgICAgICAgICBmb3JtRGF0YS5hcHBlbmQoa2V5LCBpdGVtKTsNCiAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgfSBlbHNlIHsNCiAgICAgICAgICAgICAgZm9ybURhdGEuYXBwZW5kKGtleSwgdGhpcy5kYXRhRm9ybVtrZXldKTsNCiAgICAgICAgICAgIH0NCiAgICAgICAgICB9DQogICAgICAgICAgcmVxdWVzdA0KICAgICAgICAgICAgLnBhdGNoKCIvYXBpL2RhdGEvIiArIHRoaXMuZGF0YUZvcm0uaWQgKyAiLyIsIGZvcm1EYXRhKQ0KICAgICAgICAgICAgLnRoZW4oKHJlc3BvbnNlKSA9PiB7DQogICAgICAgICAgICAgIGNvbnNvbGUubG9nKHJlc3BvbnNlKTsNCiAgICAgICAgICAgICAgdGhpcy4kbWVzc2FnZSh7DQogICAgICAgICAgICAgICAgbWVzc2FnZTogIuS/ruaUueaIkOWKnyIsDQogICAgICAgICAgICAgICAgdHlwZTogInN1Y2Nlc3MiLA0KICAgICAgICAgICAgICB9KTsNCiAgICAgICAgICAgIH0pDQogICAgICAgICAgICAuY2F0Y2goKGVycikgPT4gew0KICAgICAgICAgICAgICBsZXQgZXJyTXNnID0gZXJyLnJlc3BvbnNlLmRhdGE7DQogICAgICAgICAgICAgIGxldCBlcnJNc2dzID0gIiI7DQogICAgICAgICAgICAgIGZvciAobGV0IGtleSBpbiBlcnJNc2cpIHsNCiAgICAgICAgICAgICAgICBlcnJNc2dzICs9IGVyck1zZ1trZXldOw0KICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgIHRoaXMuJG1lc3NhZ2Uoew0KICAgICAgICAgICAgICAgIG1lc3NhZ2U6IGVyck1zZ3MsDQogICAgICAgICAgICAgICAgdHlwZTogImVycm9yIiwNCiAgICAgICAgICAgICAgfSk7DQogICAgICAgICAgICAgIGNvbnNvbGUubG9nKGVyci5yZXNwb25zZS5kYXRhKTsNCiAgICAgICAgICAgIH0pOw0KICAgICAgICB9IGVsc2Ugew0KICAgICAgICAgIGNvbnNvbGUubG9nKCJlcnJvciBzdWJtaXQhISIpOw0KICAgICAgICAgIHJldHVybiBmYWxzZTsNCiAgICAgICAgfQ0KICAgICAgfSk7DQogICAgfSwNCg0KICB9LA0KICBtb3VudGVkKCkgew0KICAgIHJlcXVlc3QNCiAgICAgIC5nZXQoImNvbmVzL2dldENvbmVzTGlzdCIpDQogICAgICAudGhlbigocmVzcG9uc2UpID0+IHsNCiAgICAgICAgdGhpcy50YWJsZURhdGEgPSByZXNwb25zZS5kYXRhLmRhdGE7DQogICAgICAgIHRoaXMudG90YWwgPSByZXNwb25zZS5kYXRhLmNvdW50Ow0KICAgICAgfSkNCiAgICAgIC5jYXRjaCgoZXJyb3IpID0+IHsNCiAgICAgICAgY29uc29sZS5sb2coZXJyb3IpOw0KICAgICAgfSk7DQogIH0sDQp9Ow0K"},{"version":3,"sources":["ConeList.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA8IA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"ConeList.vue","sourceRoot":"src/components","sourcesContent":["<template>\r\n  <div>\r\n    <el-table\r\n      ref=\"multipleTable\"\r\n      :data=\"tableData\"\r\n      tooltip-effect=\"dark\"\r\n      style=\"width: 100%\"\r\n    >\r\n      <el-table-column prop=\"coneId\" label=\"锥桶ID\" width=\"70\"> </el-table-column>\r\n      <el-table-column prop=\"coneName\" label=\"锥桶名称\" width=\"80\"> </el-table-column>\r\n      <el-table-column\r\n        prop=\"userFlag\"\r\n        \r\n        label=\"当前使用状态\"\r\n        width=\"120\"\r\n        show-overflow-tooltip\r\n        :formatter=\"formatBoolean\"\r\n      ></el-table-column>\r\n      <el-table-column prop=\"tab\" label=\"数据标签\" width=\"80\">\r\n      </el-table-column>\r\n      <el-table-column prop=\"publicType\" label=\"公开类型\" width=\"80\">\r\n      </el-table-column>\r\n      <el-table-column prop=\"permission\" label=\"权限\" width=\"220\">\r\n      </el-table-column>\r\n      <el-table-column prop=\"dateJoined\" label=\"创建时间\" width=\"160\">\r\n      </el-table-column>\r\n      <el-table-column prop=\"owner\" label=\"所属用户\" width=\"120\">\r\n      </el-table-column>\r\n      <el-table-column label=\"操作\">\r\n        <template slot-scope=\"scope\">\r\n          <el-button\r\n            size=\"mini\"\r\n            type=\"primary\"\r\n            @click=\"handleEdit(scope.$index, scope.row)\"\r\n            ><i class=\"el-icon-edit\"></i>编辑</el-button\r\n          >\r\n          <el-button\r\n            size=\"mini\"\r\n            type=\"danger\"\r\n            @click=\"handleDelete(scope.$index, scope.row)\"\r\n            ><i class=\"el-icon-delete\"></i>删除</el-button\r\n          >\r\n          <el-button\r\n            size=\"mini\"\r\n            type=\"success\"\r\n            @click=\"downloadFile(scope.$index, scope.row)\"\r\n            ><i class=\"el-icon-view\"></i>详细信息查看</el-button\r\n          >\r\n          \r\n        </template>\r\n      </el-table-column>\r\n    </el-table>\r\n    <div class=\"block\">\r\n      <el-pagination\r\n        layout=\"prev, pager, next\"\r\n        :page-size=\"pageSize\"\r\n        :total=\"total\"\r\n        :current-page.sync=\"currentPage\"\r\n        @current-change=\"CurrentChange\"\r\n        :hide-on-single-page=\"hidePage\"\r\n        style=\"text-align: right\"\r\n      >\r\n      </el-pagination>\r\n    </div>\r\n    <el-dialog title=\"修改数据信息\" :visible.sync=\"dialogTableVisible\">\r\n      <div style=\"width: 90%; margin-left: auto; margin-right: auto\">\r\n        <div style=\"text-align: center\">\r\n          <span style=\"font-size: 20px\">修改数据集</span>\r\n        </div>\r\n        <el-row style=\"margin-top: 25px\">\r\n          <el-col :span=\"24\">\r\n            <el-form\r\n              :label-position=\"labelPosition\"\r\n              label-width=\"120px\"\r\n              :model=\"dataForm\"\r\n              :rules=\"rules\"\r\n              ref=\"dataForm\"\r\n            >\r\n              <el-form-item label=\"数据集名称\" prop=\"name\">\r\n                <el-input v-model=\"dataForm.name\"></el-input>\r\n              </el-form-item>\r\n              <el-form-item label=\"数据集详细信息\" prop=\"detail\">\r\n                <el-input type=\"textarea\" v-model=\"dataForm.detail\"></el-input>\r\n              </el-form-item>\r\n              <el-form-item label=\"数据集标签\" prop=\"tab\">\r\n                <el-input v-model=\"dataForm.tab\"></el-input>\r\n              </el-form-item>\r\n              <el-form-item label=\"数据集公开类型\" prop=\"publicType\">\r\n                <el-radio-group v-model=\"dataForm.publicType\">\r\n                  <el-radio label=\"0\" name=\"publicType\">私有类型</el-radio>\r\n                  <el-radio label=\"1\" name=\"publicType\">同组成员</el-radio>\r\n                  <el-radio label=\"2\" name=\"publicType\">公开</el-radio>\r\n                </el-radio-group>\r\n              </el-form-item>\r\n              <el-form-item label=\"权限设置\" prop=\"permission\">\r\n                <el-checkbox-group v-model=\"dataForm.permission\">\r\n                  <el-checkbox label=\"0\" name=\"permission\"\r\n                    >详细信息</el-checkbox\r\n                  >\r\n                  <el-checkbox label=\"1\" name=\"permission\"\r\n                    >聚合查询</el-checkbox\r\n                  >\r\n                  <el-checkbox label=\"2\" name=\"permission\"\r\n                    >直方图发布</el-checkbox\r\n                  >\r\n                </el-checkbox-group>\r\n              </el-form-item>\r\n              <el-form-item label=\"上传文件\" prop=\"dataSet\" style=\"height: 50%\">\r\n                <el-upload\r\n                  accept=\".csv\"\r\n                  action=\"\"\r\n                  :before-remove=\"beforeRemove\"\r\n                  :on-remove=\"handleRemove\"\r\n                  :on-change=\"handleChange\"\r\n                  multiple\r\n                  :limit=\"1\"\r\n                  :on-exceed=\"handleExceed\"\r\n                  :file-list=\"fileList\"\r\n                  :auto-upload=\"false\"\r\n                >\r\n                  <el-button size=\"small\" type=\"success\"\r\n                    ><i class=\"el-icon-upload el-icon--right\"></i\r\n                    >&nbsp;点击上传</el-button\r\n                  >\r\n                  <div slot=\"tip\" class=\"el-upload__tip\">只能上传csv文件</div>\r\n                </el-upload>\r\n              </el-form-item>\r\n              <el-form-item>\r\n                <el-button type=\"primary\" @click=\"onSubmit('dataForm')\"\r\n                  >修改</el-button\r\n                >\r\n                <el-button @click=\"resetForm('dataForm')\">重置</el-button>\r\n              </el-form-item>\r\n            </el-form>\r\n          </el-col>\r\n        </el-row>\r\n      </div>\r\n    </el-dialog>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport request from \"@/utils/request\";\r\n\r\nexport default {\r\n  data() {\r\n\r\n    return {\r\n      tableData: [],\r\n      multipleSelection: [],\r\n      total: 0,\r\n      pageSize: 9,\r\n      currentPage: 1,\r\n      dialogTableVisible: false,\r\n      hidePage: true,\r\n      labelPosition: \"right\",\r\n      dataForm: {\r\n        coneId:\"\",\r\n        coneName: \"\",\r\n\r\n        userFlag:\"\",\r\n        tab: \"\",\r\n        publicType: \"\",\r\n        permission: [],\r\n      },\r\n      fileList: [],\r\n\r\n      rules: {\r\n        name: [\r\n          { required: true, message: \"请输入数据集名称\", trigger: \"blur\" },\r\n        ],\r\n        detail: [\r\n          { required: true, message: \"请输入数据集详细信息\", trigger: \"blur\" },\r\n        ],\r\n        tab: [{ required: true, message: \"请输入数据集标签\", trigger: \"blur\" }],\r\n        publicType: [\r\n          { required: true, message: \"请选择公开类型\", trigger: \"blur\" },\r\n        ],\r\n        permission: [\r\n          { required: true, message: \"请选至少一个权限\", trigger: \"blur\" },\r\n        ],\r\n      },\r\n    };\r\n  },\r\n\r\n  methods: {\r\n    downloadFile(index, row) {\r\n      window.location.href = row.dataSet;\r\n    },\r\n    handleDelete(index, row) {\r\n      request\r\n        .delete(\"/api/data/\" + row.id)\r\n        .then(() => {\r\n          this.$message({\r\n            message: \"删除成功\",\r\n            type: \"success\",\r\n          });\r\n          this.CurrentChange(this.currentPage);\r\n        })\r\n        .catch((error) => {\r\n          console.log(error);\r\n          this.$message({\r\n            message: \"删除失败\",\r\n            type: \"error\",\r\n          });\r\n        });\r\n    },\r\n     formatBoolean(row, column, cellValue) {\r\n       let value;\r\n       switch(cellValue){\r\n         case 1 : value = \"在途使用中\"; break;\r\n         case 2: value = \"库存保存中\";break;\r\n         default:value = \"库存保存中\";break;\r\n       }\r\n     return value;\r\n    },\r\n    CurrentChange(page) {\r\n      this.currentPage = page;\r\n      request\r\n        .get(\"api/data?page=\" + page + \"&size=\" + this.pageSize)\r\n        .then((response) => {\r\n          this.tableData = response.data.results;\r\n          this.total = response.data.count;\r\n        });\r\n    },\r\n    handleEdit(index, row) {\r\n      this.dialogTableVisible = true;\r\n      this.fileList = [\r\n        { name: row.dataSet.split(\"/\").pop(), url: row.dataSet },\r\n      ];\r\n      this.dataForm.id = row.id;\r\n      this.dataForm.name = row.name;\r\n      this.dataForm.detail = row.detail;\r\n      this.dataForm.tab = row.tab;\r\n      let publicType = [\"私有类型\", \"同组成员\", \"公开\"];\r\n      let permission = [\"详细信息\", \"聚合查询\", \"直方图发布\"];\r\n      let rowPermissionArr = row.permission.split(\", \");\r\n      let arr = [];\r\n      for (let item in rowPermissionArr) {\r\n        arr.push(String(permission.indexOf(rowPermissionArr[item])));\r\n      }\r\n      this.dataForm.permission = arr;\r\n      this.dataForm.publicType = String(publicType.indexOf(row.publicType));\r\n    },\r\n    beforeRemove(file) {\r\n      return this.$confirm(`确定移除 ${file.name}？`);\r\n    },\r\n    handleRemove() {\r\n      this.dataForm.dataSet = null;\r\n    },\r\n    handleExceed() {\r\n      this.$message.warning(`只能选择一个文件`);\r\n    },\r\n    handleChange(file, fileList) {\r\n      this.fileList = fileList;\r\n      this.dataForm.dataSet = file.raw;\r\n    },\r\n    resetForm(formName) {\r\n      this.$refs[formName].resetFields();\r\n    },\r\n    onSubmit(formName) {\r\n      this.$refs[formName].validate((valid) => {\r\n        if (valid) {\r\n          let formData = new FormData();\r\n          for (let key in this.dataForm) {\r\n            if (key === \"permission\" && this.dataForm[key].length != 1) {\r\n              for (let item in this.dataForm[key]) {\r\n                formData.append(key, item);\r\n              }\r\n            } else {\r\n              formData.append(key, this.dataForm[key]);\r\n            }\r\n          }\r\n          request\r\n            .patch(\"/api/data/\" + this.dataForm.id + \"/\", formData)\r\n            .then((response) => {\r\n              console.log(response);\r\n              this.$message({\r\n                message: \"修改成功\",\r\n                type: \"success\",\r\n              });\r\n            })\r\n            .catch((err) => {\r\n              let errMsg = err.response.data;\r\n              let errMsgs = \"\";\r\n              for (let key in errMsg) {\r\n                errMsgs += errMsg[key];\r\n              }\r\n              this.$message({\r\n                message: errMsgs,\r\n                type: \"error\",\r\n              });\r\n              console.log(err.response.data);\r\n            });\r\n        } else {\r\n          console.log(\"error submit!!\");\r\n          return false;\r\n        }\r\n      });\r\n    },\r\n\r\n  },\r\n  mounted() {\r\n    request\r\n      .get(\"cones/getConesList\")\r\n      .then((response) => {\r\n        this.tableData = response.data.data;\r\n        this.total = response.data.count;\r\n      })\r\n      .catch((error) => {\r\n        console.log(error);\r\n      });\r\n  },\r\n};\r\n</script>"]}]}