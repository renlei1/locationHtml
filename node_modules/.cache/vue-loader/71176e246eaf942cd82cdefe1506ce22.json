{"remainingRequest":"E:\\WorkSpace\\SchoolWorkSpace\\dp_font\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!E:\\WorkSpace\\SchoolWorkSpace\\dp_font\\src\\components\\ConesList.vue?vue&type=script&lang=js&","dependencies":[{"path":"E:\\WorkSpace\\SchoolWorkSpace\\dp_font\\src\\components\\ConesList.vue","mtime":1611458504964},{"path":"E:\\WorkSpace\\SchoolWorkSpace\\dp_font\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"E:\\WorkSpace\\SchoolWorkSpace\\dp_font\\node_modules\\babel-loader\\lib\\index.js","mtime":315532800000},{"path":"E:\\WorkSpace\\SchoolWorkSpace\\dp_font\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"E:\\WorkSpace\\SchoolWorkSpace\\dp_font\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KDQppbXBvcnQgcmVxdWVzdCBmcm9tICJAL3V0aWxzL3JlcXVlc3QiOw0KDQpleHBvcnQgZGVmYXVsdCB7DQogIGRhdGEoKSB7DQoNCiAgICByZXR1cm4gew0KICAgICAgdGFibGVEYXRhOiBbXSwNCiAgICAgIG11bHRpcGxlU2VsZWN0aW9uOiBbXSwNCiAgICAgIHRvdGFsOiAwLA0KICAgICAgcGFnZVNpemU6IDksDQogICAgICBjdXJyZW50UGFnZTogMSwNCiAgICAgIGRpYWxvZ1RhYmxlVmlzaWJsZTogZmFsc2UsDQogICAgICBoaWRlUGFnZTogdHJ1ZSwNCiAgICAgIGxhYmVsUG9zaXRpb246ICJyaWdodCIsDQogICAgICBkYXRhRm9ybTogew0KICAgICAgICBjb25lSWQ6IiIsDQogICAgICAgIGNvbmVOYW1lOiAiIiwNCiAgICAgICAgY3JlYXRldGltZToiIiwNCiAgICAgICAgdXNlckZsYWc6IiIsDQogICAgICAgIHRhYjogIiIsDQogICAgICAgIHB1YmxpY1R5cGU6ICIiLA0KICAgICAgICBwZXJtaXNzaW9uOiBbXSwNCiAgICAgIH0sDQogICAgICBmaWxlTGlzdDogW10sDQoNCiAgICAgIHJ1bGVzOiB7DQogICAgICAgIG5hbWU6IFsNCiAgICAgICAgICB7IHJlcXVpcmVkOiB0cnVlLCBtZXNzYWdlOiAi6K+36L6T5YWl5pWw5o2u6ZuG5ZCN56ewIiwgdHJpZ2dlcjogImJsdXIiIH0sDQogICAgICAgIF0sDQogICAgICAgIGRldGFpbDogWw0KICAgICAgICAgIHsgcmVxdWlyZWQ6IHRydWUsIG1lc3NhZ2U6ICLor7fovpPlhaXmlbDmja7pm4bor6bnu4bkv6Hmga8iLCB0cmlnZ2VyOiAiYmx1ciIgfSwNCiAgICAgICAgXSwNCiAgICAgICAgdGFiOiBbeyByZXF1aXJlZDogdHJ1ZSwgbWVzc2FnZTogIuivt+i+k+WFpeaVsOaNrumbhuagh+etviIsIHRyaWdnZXI6ICJibHVyIiB9XSwNCiAgICAgICAgcHVibGljVHlwZTogWw0KICAgICAgICAgIHsgcmVxdWlyZWQ6IHRydWUsIG1lc3NhZ2U6ICLor7fpgInmi6nlhazlvIDnsbvlnosiLCB0cmlnZ2VyOiAiYmx1ciIgfSwNCiAgICAgICAgXSwNCiAgICAgICAgcGVybWlzc2lvbjogWw0KICAgICAgICAgIHsgcmVxdWlyZWQ6IHRydWUsIG1lc3NhZ2U6ICLor7fpgInoh7PlsJHkuIDkuKrmnYPpmZAiLCB0cmlnZ2VyOiAiYmx1ciIgfSwNCiAgICAgICAgXSwNCiAgICAgIH0sDQogICAgfTsNCiAgfSwNCg0KICBtZXRob2RzOiB7DQogICAgZG93bmxvYWRGaWxlKGluZGV4LCByb3cpIHsNCiAgICAgIHdpbmRvdy5sb2NhdGlvbi5ocmVmID0gcm93LmRhdGFTZXQ7DQogICAgfSwNCiAgICBoYW5kbGVEZWxldGUoaW5kZXgsIHJvdykgew0KICAgICAgY29uc29sZS5sb2cocm93LmNvbmVJZCk7DQogICAgICByZXF1ZXN0DQogICAgICAgIC5nZXQoIi9jb25lcy9kZWxldGVDb25lcz9jb25lc0lkPSIgKyByb3cuY29uZUlkKQ0KICAgICAgICAudGhlbigoKSA9PiB7DQogICAgICAgICAgdGhpcy4kbWVzc2FnZSh7DQogICAgICAgICAgICBtZXNzYWdlOiAi5Yig6Zmk5oiQ5YqfIiwNCiAgICAgICAgICAgIHR5cGU6ICJzdWNjZXNzIiwNCiAgICAgICAgICB9DQogICAgICAgICAgKTsNCiAgICAgICAgICB0aGlzLkN1cnJlbnRDaGFuZ2UodGhpcy5jdXJyZW50UGFnZSk7DQogIA0KICAgICAgICB9KQ0KICAgICAgICAuY2F0Y2goKGVycm9yKSA9PiB7DQogICAgICAgICAgY29uc29sZS5sb2coZXJyb3IpOw0KICAgICAgICAgIHRoaXMuJG1lc3NhZ2Uoew0KICAgICAgICAgICAgbWVzc2FnZTogIuWIoOmZpOWksei0pSIsDQogICAgICAgICAgICB0eXBlOiAiZXJyb3IiLA0KICAgICAgICAgIH0pOw0KICAgICAgICB9KTsNCiAgICB9LA0KICAgICBmb3JtYXRCb29sZWFuKHJvdywgY29sdW1uLCBjZWxsVmFsdWUpIHsNCiAgICAgICBsZXQgdmFsdWU7DQogICAgICAgc3dpdGNoKGNlbGxWYWx1ZSl7DQogICAgICAgICBjYXNlIDEgOiB2YWx1ZSA9ICLlnKjpgJTkvb/nlKjkuK0iOyBicmVhazsNCiAgICAgICAgIGNhc2UgMjogdmFsdWUgPSAi5bqT5a2Y5L+d5a2Y5LitIjticmVhazsNCiAgICAgICAgIGRlZmF1bHQ6dmFsdWUgPSAi5bqT5a2Y5L+d5a2Y5LitIjticmVhazsNCiAgICAgICB9DQogICAgIHJldHVybiB2YWx1ZTsNCiAgICB9LA0KICAgIGZvcm1hdHNjcmFwRmxhZyhyb3csIGNvbHVtbiwgY2VsbFZhbHVlKSB7DQogICAgICAgbGV0IHZhbHVlOw0KICAgICAgIHN3aXRjaChjZWxsVmFsdWUpew0KICAgICAgICAgY2FzZSAwIDogdmFsdWUgPSAi5pyq5oql5bqfIjsgYnJlYWs7DQogICAgICAgICBjYXNlIDE6IHZhbHVlID0gIuW3suaKpeW6nyI7YnJlYWs7DQogICAgICAgICBkZWZhdWx0OnZhbHVlID0gIuacquaKpeW6nyI7YnJlYWs7DQogICAgICAgfQ0KICAgICAgcmV0dXJuIHZhbHVlOw0KICAgICB9LA0KICAgICAgZm9ybWF0QmF0dGVyeUxlZnQocm93LCBjb2x1bW4sIGNlbGxWYWx1ZSkgew0KICAgICAgcmV0dXJuIGNlbGxWYWx1ZSArICclJzsNCiAgICAgfSwNCiAgICAgZm9ybWF0VHlwZShyb3csIGNvbHVtbiwgY2VsbFZhbHVlKSB7DQogICAgICBsZXQgdmFsdWU7DQogICAgICAgc3dpdGNoKGNlbGxWYWx1ZSl7DQogICAgICAgICBjYXNlIDE6IHZhbHVlID0gIumrmOmAn+mBk+i3ryI7IGJyZWFrOw0KICAgICAgICAgY2FzZSAyOiB2YWx1ZSA9ICLmma7pgJrpgZPot68iO2JyZWFrOw0KICAgICAgICAgY2FzZSAzOiB2YWx1ZSA9ICLooZfpgZMiO2JyZWFrOw0KICAgICAgICAgZGVmYXVsdDp2YWx1ZSA9ICLpq5jpgJ/pgZPot68iO2JyZWFrOw0KICAgICAgIH0NCiAgICAgIHJldHVybiB2YWx1ZTsNCiAgICAgfSwNCg0KDQoNCiAgICBDdXJyZW50Q2hhbmdlKHBhZ2UpIHsNCiAgICAgIHRoaXMuY3VycmVudFBhZ2UgPSBwYWdlOw0KICAgICAgcmVxdWVzdA0KICAgICAgICAuZ2V0KCJhcGkvZGF0YT9wYWdlPSIgKyBwYWdlICsgIiZzaXplPSIgKyB0aGlzLnBhZ2VTaXplKQ0KICAgICAgICAudGhlbigocmVzcG9uc2UpID0+IHsNCiAgICAgICAgICB0aGlzLnRhYmxlRGF0YSA9IHJlc3BvbnNlLmRhdGEucmVzdWx0czsNCiAgICAgICAgICB0aGlzLnRvdGFsID0gcmVzcG9uc2UuZGF0YS5jb3VudDsNCiAgICAgICAgfSk7DQogICAgfSwNCiAgICBoYW5kbGVFZGl0KGluZGV4LCByb3cpIHsNCiAgICAgIHRoaXMuZGlhbG9nVGFibGVWaXNpYmxlID0gdHJ1ZTsNCiAgICAgIHRoaXMuZmlsZUxpc3QgPSBbDQogICAgICAgIHsgbmFtZTogcm93LmRhdGFTZXQuc3BsaXQoIi8iKS5wb3AoKSwgdXJsOiByb3cuZGF0YVNldCB9LA0KICAgICAgXTsNCiAgICAgIHRoaXMuZGF0YUZvcm0uaWQgPSByb3cuaWQ7DQogICAgICB0aGlzLmRhdGFGb3JtLm5hbWUgPSByb3cubmFtZTsNCiAgICAgIHRoaXMuZGF0YUZvcm0uZGV0YWlsID0gcm93LmRldGFpbDsNCiAgICAgIHRoaXMuZGF0YUZvcm0udGFiID0gcm93LnRhYjsNCiAgICAgIGxldCBwdWJsaWNUeXBlID0gWyLnp4HmnInnsbvlnosiLCAi5ZCM57uE5oiQ5ZGYIiwgIuWFrOW8gCJdOw0KICAgICAgbGV0IHBlcm1pc3Npb24gPSBbIuivpue7huS/oeaBryIsICLogZrlkIjmn6Xor6IiLCAi55u05pa55Zu+5Y+R5biDIl07DQogICAgICBsZXQgcm93UGVybWlzc2lvbkFyciA9IHJvdy5wZXJtaXNzaW9uLnNwbGl0KCIsICIpOw0KICAgICAgbGV0IGFyciA9IFtdOw0KICAgICAgZm9yIChsZXQgaXRlbSBpbiByb3dQZXJtaXNzaW9uQXJyKSB7DQogICAgICAgIGFyci5wdXNoKFN0cmluZyhwZXJtaXNzaW9uLmluZGV4T2Yocm93UGVybWlzc2lvbkFycltpdGVtXSkpKTsNCiAgICAgIH0NCiAgICAgIHRoaXMuZGF0YUZvcm0ucGVybWlzc2lvbiA9IGFycjsNCiAgICAgIHRoaXMuZGF0YUZvcm0ucHVibGljVHlwZSA9IFN0cmluZyhwdWJsaWNUeXBlLmluZGV4T2Yocm93LnB1YmxpY1R5cGUpKTsNCiAgICB9LA0KICAgIGJlZm9yZVJlbW92ZShmaWxlKSB7DQogICAgICByZXR1cm4gdGhpcy4kY29uZmlybShg56Gu5a6a56e76ZmkICR7ZmlsZS5uYW1lfe+8n2ApOw0KICAgIH0sDQogICAgaGFuZGxlUmVtb3ZlKCkgew0KICAgICAgdGhpcy5kYXRhRm9ybS5kYXRhU2V0ID0gbnVsbDsNCiAgICB9LA0KICAgIGhhbmRsZUV4Y2VlZCgpIHsNCiAgICAgIHRoaXMuJG1lc3NhZ2Uud2FybmluZyhg5Y+q6IO96YCJ5oup5LiA5Liq5paH5Lu2YCk7DQogICAgfSwNCiAgICBoYW5kbGVDaGFuZ2UoZmlsZSwgZmlsZUxpc3QpIHsNCiAgICAgIHRoaXMuZmlsZUxpc3QgPSBmaWxlTGlzdDsNCiAgICAgIHRoaXMuZGF0YUZvcm0uZGF0YVNldCA9IGZpbGUucmF3Ow0KICAgIH0sDQogICAgcmVzZXRGb3JtKGZvcm1OYW1lKSB7DQogICAgICB0aGlzLiRyZWZzW2Zvcm1OYW1lXS5yZXNldEZpZWxkcygpOw0KICAgIH0sDQogICAgb25TdWJtaXQoZm9ybU5hbWUpIHsNCiAgICAgIHRoaXMuJHJlZnNbZm9ybU5hbWVdLnZhbGlkYXRlKCh2YWxpZCkgPT4gew0KICAgICAgICBpZiAodmFsaWQpIHsNCiAgICAgICAgICBsZXQgZm9ybURhdGEgPSBuZXcgRm9ybURhdGEoKTsNCiAgICAgICAgICBmb3IgKGxldCBrZXkgaW4gdGhpcy5kYXRhRm9ybSkgew0KICAgICAgICAgICAgaWYgKGtleSA9PT0gInBlcm1pc3Npb24iICYmIHRoaXMuZGF0YUZvcm1ba2V5XS5sZW5ndGggIT0gMSkgew0KICAgICAgICAgICAgICBmb3IgKGxldCBpdGVtIGluIHRoaXMuZGF0YUZvcm1ba2V5XSkgew0KICAgICAgICAgICAgICAgIGZvcm1EYXRhLmFwcGVuZChrZXksIGl0ZW0pOw0KICAgICAgICAgICAgICB9DQogICAgICAgICAgICB9IGVsc2Ugew0KICAgICAgICAgICAgICBmb3JtRGF0YS5hcHBlbmQoa2V5LCB0aGlzLmRhdGFGb3JtW2tleV0pOw0KICAgICAgICAgICAgfQ0KICAgICAgICAgIH0NCiAgICAgICAgICByZXF1ZXN0DQogICAgICAgICAgICAucGF0Y2goIi9hcGkvZGF0YS8iICsgdGhpcy5kYXRhRm9ybS5pZCArICIvIiwgZm9ybURhdGEpDQogICAgICAgICAgICAudGhlbigocmVzcG9uc2UpID0+IHsNCiAgICAgICAgICAgICAgY29uc29sZS5sb2cocmVzcG9uc2UpOw0KICAgICAgICAgICAgICB0aGlzLiRtZXNzYWdlKHsNCiAgICAgICAgICAgICAgICBtZXNzYWdlOiAi5L+u5pS55oiQ5YqfIiwNCiAgICAgICAgICAgICAgICB0eXBlOiAic3VjY2VzcyIsDQogICAgICAgICAgICAgIH0pOw0KICAgICAgICAgICAgfSkNCiAgICAgICAgICAgIC5jYXRjaCgoZXJyKSA9PiB7DQogICAgICAgICAgICAgIGxldCBlcnJNc2cgPSBlcnIucmVzcG9uc2UuZGF0YTsNCiAgICAgICAgICAgICAgbGV0IGVyck1zZ3MgPSAiIjsNCiAgICAgICAgICAgICAgZm9yIChsZXQga2V5IGluIGVyck1zZykgew0KICAgICAgICAgICAgICAgIGVyck1zZ3MgKz0gZXJyTXNnW2tleV07DQogICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgdGhpcy4kbWVzc2FnZSh7DQogICAgICAgICAgICAgICAgbWVzc2FnZTogZXJyTXNncywNCiAgICAgICAgICAgICAgICB0eXBlOiAiZXJyb3IiLA0KICAgICAgICAgICAgICB9KTsNCiAgICAgICAgICAgICAgY29uc29sZS5sb2coZXJyLnJlc3BvbnNlLmRhdGEpOw0KICAgICAgICAgICAgfSk7DQogICAgICAgIH0gZWxzZSB7DQogICAgICAgICAgY29uc29sZS5sb2coImVycm9yIHN1Ym1pdCEhIik7DQogICAgICAgICAgcmV0dXJuIGZhbHNlOw0KICAgICAgICB9DQogICAgICB9KTsNCiAgICB9LA0KDQogIH0sDQogIG1vdW50ZWQoKSB7DQogICAgcmVxdWVzdA0KICAgICAgLmdldCgiY29uZXMvZ2V0Q29uZXNMaXN0IikNCiAgICAgIC50aGVuKChyZXNwb25zZSkgPT4gew0KICAgICAgICB0aGlzLnRhYmxlRGF0YSA9IHJlc3BvbnNlLmRhdGEuZGF0YTsNCiAgICAgICAgdGhpcy50b3RhbCA9IHJlc3BvbnNlLmRhdGEuY291bnQ7DQogICAgICB9KQ0KICAgICAgLmNhdGNoKChlcnJvcikgPT4gew0KICAgICAgICBjb25zb2xlLmxvZyhlcnJvcik7DQogICAgICB9KTsNCiAgfSwNCn07DQo="},{"version":3,"sources":["ConesList.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAoJA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;AAIA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"ConesList.vue","sourceRoot":"src/components","sourcesContent":["<template>\r\n  <div>\r\n    <el-table\r\n      ref=\"multipleTable\"\r\n      :data=\"tableData\"\r\n      tooltip-effect=\"dark\"\r\n  \r\n      highlight-current-row=true\r\n      header-row-style=\"color:#606266\"\r\n      style=\"width: 100%;\"\r\n    >\r\n      <el-table-column prop=\"coneId\" label=\"锥桶ID\" width=\"70\"> </el-table-column>\r\n      <el-table-column prop=\"coneName\" label=\"锥桶名称\" width=\"80\"> </el-table-column>\r\n      <el-table-column prop=\"type\" :formatter=\"formatType\" label=\"锥桶类别\" width=\"80\"> </el-table-column>\r\n\r\n      <el-table-column\r\n        prop=\"userFlag\"\r\n        \r\n        label=\"当前使用状态\"\r\n        width=\"120\"\r\n        show-overflow-tooltip\r\n        :formatter=\"formatBoolean\"\r\n      ></el-table-column>\r\n      <el-table-column prop=\"inTime\" :formatter=\"formatCreatetime\" label=\"入库时间\" width=\"160\"> </el-table-column>\r\n      <el-table-column  prop=\"location\" label=\"当前位置\" width=\"140\">\r\n      </el-table-column>\r\n      <el-table-column prop=\"batteryLeft\" label=\"剩余电量\" :formatter=\"formatBatteryLeft\" width=\"80\">\r\n      </el-table-column>\r\n      <el-table-column prop=\"scrapFlag\"  :formatter=\"formatscrapFlag\" label=\"报废状态\" width=\"80\">\r\n      </el-table-column>\r\n      <el-table-column prop=\"scrapTime\" label=\"报废时间\" width=\"160\">\r\n      </el-table-column>\r\n      <el-table-column prop=\"createtime\" label=\"添加时间\" width=\"160\" :formatter=\"formatCreatetime\">\r\n      </el-table-column>\r\n      <el-table-column label=\"操作\">\r\n        <template slot-scope=\"scope\">\r\n          <el-button\r\n            size=\"mini\"\r\n            type=\"primary\"\r\n            @click=\"handleEdit(scope.$index, scope.row)\"\r\n            ><i class=\"el-icon-edit\"></i>编辑</el-button\r\n          >\r\n          <el-button\r\n            size=\"mini\"\r\n            type=\"danger\"\r\n            @click=\"handleDelete(scope.$index, scope.row)\"\r\n            ><i class=\"el-icon-delete\"></i>删除</el-button\r\n          >\r\n          <el-button\r\n            size=\"mini\"\r\n            type=\"success\"\r\n            @click=\"downloadFile(scope.$index, scope.row)\"\r\n            ><i class=\"el-icon-view\"></i>详细信息查看</el-button\r\n          >\r\n          \r\n        </template>\r\n      </el-table-column>\r\n    </el-table>\r\n    <div class=\"block\">\r\n      <el-pagination\r\n        layout=\"prev, pager, next\"\r\n        :page-size=\"pageSize\"\r\n        :total=\"total\"\r\n        :current-page.sync=\"currentPage\"\r\n        @current-change=\"CurrentChange\"\r\n        :hide-on-single-page=\"hidePage\"\r\n        style=\"text-align: right\"\r\n      >\r\n      </el-pagination>\r\n    </div>\r\n    <el-dialog title=\"修改数据信息\" :visible.sync=\"dialogTableVisible\">\r\n      <div style=\"width: 90%; margin-left: auto; margin-right: auto\">\r\n        <div style=\"text-align: center\">\r\n          <span style=\"font-size: 20px\">修改数据集</span>\r\n        </div>\r\n        <el-row style=\"margin-top: 25px\">\r\n          <el-col :span=\"24\">\r\n            <el-form\r\n              :label-position=\"labelPosition\"\r\n              label-width=\"120px\"\r\n              :model=\"dataForm\"\r\n              :rules=\"rules\"\r\n              ref=\"dataForm\"\r\n            >\r\n              <el-form-item label=\"数据集名称\" prop=\"name\">\r\n                <el-input v-model=\"dataForm.name\"></el-input>\r\n              </el-form-item>\r\n              <el-form-item label=\"数据集详细信息\" prop=\"detail\">\r\n                <el-input type=\"textarea\" v-model=\"dataForm.detail\"></el-input>\r\n              </el-form-item>\r\n              <el-form-item label=\"数据集标签\" prop=\"tab\">\r\n                <el-input v-model=\"dataForm.tab\"></el-input>\r\n              </el-form-item>\r\n              <el-form-item label=\"数据集公开类型\" prop=\"publicType\">\r\n                <el-radio-group v-model=\"dataForm.publicType\">\r\n                  <el-radio label=\"0\" name=\"publicType\">私有类型</el-radio>\r\n                  <el-radio label=\"1\" name=\"publicType\">同组成员</el-radio>\r\n                  <el-radio label=\"2\" name=\"publicType\">公开</el-radio>\r\n                </el-radio-group>\r\n              </el-form-item>\r\n              <el-form-item label=\"权限设置\" prop=\"permission\">\r\n                <el-checkbox-group v-model=\"dataForm.permission\">\r\n                  <el-checkbox label=\"0\" name=\"permission\"\r\n                    >详细信息</el-checkbox\r\n                  >\r\n                  <el-checkbox label=\"1\" name=\"permission\"\r\n                    >聚合查询</el-checkbox\r\n                  >\r\n                  <el-checkbox label=\"2\" name=\"permission\"\r\n                    >直方图发布</el-checkbox\r\n                  >\r\n                </el-checkbox-group>\r\n              </el-form-item>\r\n              <el-form-item label=\"上传文件\" prop=\"dataSet\" style=\"height: 50%\">\r\n                <el-upload\r\n                  accept=\".csv\"\r\n                  action=\"\"\r\n                  :before-remove=\"beforeRemove\"\r\n                  :on-remove=\"handleRemove\"\r\n                  :on-change=\"handleChange\"\r\n                  multiple\r\n                  :limit=\"1\"\r\n                  :on-exceed=\"handleExceed\"\r\n                  :file-list=\"fileList\"\r\n                  :auto-upload=\"false\"\r\n                >\r\n                  <el-button size=\"small\" type=\"success\"\r\n                    ><i class=\"el-icon-upload el-icon--right\"></i\r\n                    >&nbsp;点击上传</el-button\r\n                  >\r\n                  <div slot=\"tip\" class=\"el-upload__tip\">只能上传csv文件</div>\r\n                </el-upload>\r\n              </el-form-item>\r\n              <el-form-item>\r\n                <el-button type=\"primary\" @click=\"onSubmit('dataForm')\"\r\n                  >修改</el-button\r\n                >\r\n                <el-button @click=\"resetForm('dataForm')\">重置</el-button>\r\n              </el-form-item>\r\n            </el-form>\r\n          </el-col>\r\n        </el-row>\r\n      </div>\r\n    </el-dialog>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport request from \"@/utils/request\";\r\n\r\nexport default {\r\n  data() {\r\n\r\n    return {\r\n      tableData: [],\r\n      multipleSelection: [],\r\n      total: 0,\r\n      pageSize: 9,\r\n      currentPage: 1,\r\n      dialogTableVisible: false,\r\n      hidePage: true,\r\n      labelPosition: \"right\",\r\n      dataForm: {\r\n        coneId:\"\",\r\n        coneName: \"\",\r\n        createtime:\"\",\r\n        userFlag:\"\",\r\n        tab: \"\",\r\n        publicType: \"\",\r\n        permission: [],\r\n      },\r\n      fileList: [],\r\n\r\n      rules: {\r\n        name: [\r\n          { required: true, message: \"请输入数据集名称\", trigger: \"blur\" },\r\n        ],\r\n        detail: [\r\n          { required: true, message: \"请输入数据集详细信息\", trigger: \"blur\" },\r\n        ],\r\n        tab: [{ required: true, message: \"请输入数据集标签\", trigger: \"blur\" }],\r\n        publicType: [\r\n          { required: true, message: \"请选择公开类型\", trigger: \"blur\" },\r\n        ],\r\n        permission: [\r\n          { required: true, message: \"请选至少一个权限\", trigger: \"blur\" },\r\n        ],\r\n      },\r\n    };\r\n  },\r\n\r\n  methods: {\r\n    downloadFile(index, row) {\r\n      window.location.href = row.dataSet;\r\n    },\r\n    handleDelete(index, row) {\r\n      console.log(row.coneId);\r\n      request\r\n        .get(\"/cones/deleteCones?conesId=\" + row.coneId)\r\n        .then(() => {\r\n          this.$message({\r\n            message: \"删除成功\",\r\n            type: \"success\",\r\n          }\r\n          );\r\n          this.CurrentChange(this.currentPage);\r\n  \r\n        })\r\n        .catch((error) => {\r\n          console.log(error);\r\n          this.$message({\r\n            message: \"删除失败\",\r\n            type: \"error\",\r\n          });\r\n        });\r\n    },\r\n     formatBoolean(row, column, cellValue) {\r\n       let value;\r\n       switch(cellValue){\r\n         case 1 : value = \"在途使用中\"; break;\r\n         case 2: value = \"库存保存中\";break;\r\n         default:value = \"库存保存中\";break;\r\n       }\r\n     return value;\r\n    },\r\n    formatscrapFlag(row, column, cellValue) {\r\n       let value;\r\n       switch(cellValue){\r\n         case 0 : value = \"未报废\"; break;\r\n         case 1: value = \"已报废\";break;\r\n         default:value = \"未报废\";break;\r\n       }\r\n      return value;\r\n     },\r\n      formatBatteryLeft(row, column, cellValue) {\r\n      return cellValue + '%';\r\n     },\r\n     formatType(row, column, cellValue) {\r\n      let value;\r\n       switch(cellValue){\r\n         case 1: value = \"高速道路\"; break;\r\n         case 2: value = \"普通道路\";break;\r\n         case 3: value = \"街道\";break;\r\n         default:value = \"高速道路\";break;\r\n       }\r\n      return value;\r\n     },\r\n\r\n\r\n\r\n    CurrentChange(page) {\r\n      this.currentPage = page;\r\n      request\r\n        .get(\"api/data?page=\" + page + \"&size=\" + this.pageSize)\r\n        .then((response) => {\r\n          this.tableData = response.data.results;\r\n          this.total = response.data.count;\r\n        });\r\n    },\r\n    handleEdit(index, row) {\r\n      this.dialogTableVisible = true;\r\n      this.fileList = [\r\n        { name: row.dataSet.split(\"/\").pop(), url: row.dataSet },\r\n      ];\r\n      this.dataForm.id = row.id;\r\n      this.dataForm.name = row.name;\r\n      this.dataForm.detail = row.detail;\r\n      this.dataForm.tab = row.tab;\r\n      let publicType = [\"私有类型\", \"同组成员\", \"公开\"];\r\n      let permission = [\"详细信息\", \"聚合查询\", \"直方图发布\"];\r\n      let rowPermissionArr = row.permission.split(\", \");\r\n      let arr = [];\r\n      for (let item in rowPermissionArr) {\r\n        arr.push(String(permission.indexOf(rowPermissionArr[item])));\r\n      }\r\n      this.dataForm.permission = arr;\r\n      this.dataForm.publicType = String(publicType.indexOf(row.publicType));\r\n    },\r\n    beforeRemove(file) {\r\n      return this.$confirm(`确定移除 ${file.name}？`);\r\n    },\r\n    handleRemove() {\r\n      this.dataForm.dataSet = null;\r\n    },\r\n    handleExceed() {\r\n      this.$message.warning(`只能选择一个文件`);\r\n    },\r\n    handleChange(file, fileList) {\r\n      this.fileList = fileList;\r\n      this.dataForm.dataSet = file.raw;\r\n    },\r\n    resetForm(formName) {\r\n      this.$refs[formName].resetFields();\r\n    },\r\n    onSubmit(formName) {\r\n      this.$refs[formName].validate((valid) => {\r\n        if (valid) {\r\n          let formData = new FormData();\r\n          for (let key in this.dataForm) {\r\n            if (key === \"permission\" && this.dataForm[key].length != 1) {\r\n              for (let item in this.dataForm[key]) {\r\n                formData.append(key, item);\r\n              }\r\n            } else {\r\n              formData.append(key, this.dataForm[key]);\r\n            }\r\n          }\r\n          request\r\n            .patch(\"/api/data/\" + this.dataForm.id + \"/\", formData)\r\n            .then((response) => {\r\n              console.log(response);\r\n              this.$message({\r\n                message: \"修改成功\",\r\n                type: \"success\",\r\n              });\r\n            })\r\n            .catch((err) => {\r\n              let errMsg = err.response.data;\r\n              let errMsgs = \"\";\r\n              for (let key in errMsg) {\r\n                errMsgs += errMsg[key];\r\n              }\r\n              this.$message({\r\n                message: errMsgs,\r\n                type: \"error\",\r\n              });\r\n              console.log(err.response.data);\r\n            });\r\n        } else {\r\n          console.log(\"error submit!!\");\r\n          return false;\r\n        }\r\n      });\r\n    },\r\n\r\n  },\r\n  mounted() {\r\n    request\r\n      .get(\"cones/getConesList\")\r\n      .then((response) => {\r\n        this.tableData = response.data.data;\r\n        this.total = response.data.count;\r\n      })\r\n      .catch((error) => {\r\n        console.log(error);\r\n      });\r\n  },\r\n};\r\n</script>"]}]}